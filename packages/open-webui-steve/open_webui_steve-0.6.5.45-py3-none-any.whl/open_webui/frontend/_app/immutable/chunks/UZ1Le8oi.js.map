{"version":3,"file":"UZ1Le8oi.js","sources":["../../../../../../src/lib/apis/utils/index.ts"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\r\n\r\nexport const getGravatarUrl = async (token: string, email: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/gravatar?email=${email}`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const executeCode = async (token: string, code: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/code/execute`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tcode: code\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\r\n\t\t\terror = err;\r\n\t\t\tif (err.detail) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const formatPythonCode = async (token: string, code: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/code/format`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tcode: code\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\r\n\t\t\terror = err;\r\n\t\t\tif (err.detail) {\r\n\t\t\t\terror = err.detail;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\nexport const downloadChatAsPDF = async (token: string, title: string, messages: object[]) => {\r\n\tlet error = null;\r\n\r\n\tconst blob = await fetch(`${WEBUI_API_BASE_URL}/utils/pdf`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\ttitle: title,\r\n\t\t\tmessages: messages\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.blob();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\treturn blob;\r\n};\r\n\r\nexport const getHTMLFromMarkdown = async (token: string, md: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/markdown`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t},\r\n\t\tbody: JSON.stringify({\r\n\t\t\tmd: md\r\n\t\t})\r\n\t})\r\n\t\t.then(async (res) => {\r\n\t\t\tif (!res.ok) throw await res.json();\r\n\t\t\treturn res.json();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\treturn res.html;\r\n};\r\n\r\nexport const downloadDatabase = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/db/download`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow await response.json();\r\n\t\t\t}\r\n\t\t\treturn response.blob();\r\n\t\t})\r\n\t\t.then((blob) => {\r\n\t\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\t\tconst a = document.createElement('a');\r\n\t\t\ta.href = url;\r\n\t\t\ta.download = 'webui.db';\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.click();\r\n\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err.detail;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n};\r\n\r\nexport const downloadLiteLLMConfig = async (token: string) => {\r\n\tlet error = null;\r\n\r\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/litellm/config`, {\r\n\t\tmethod: 'GET',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\tAuthorization: `Bearer ${token}`\r\n\t\t}\r\n\t})\r\n\t\t.then(async (response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow await response.json();\r\n\t\t\t}\r\n\t\t\treturn response.blob();\r\n\t\t})\r\n\t\t.then((blob) => {\r\n\t\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\t\tconst a = document.createElement('a');\r\n\t\t\ta.href = url;\r\n\t\t\ta.download = 'config.yaml';\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\ta.click();\r\n\t\t\twindow.URL.revokeObjectURL(url);\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\terror = err.detail;\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\tif (error) {\r\n\t\tthrow error;\r\n\t}\r\n};\r\n"],"names":["getGravatarUrl","token","email","WEBUI_API_BASE_URL","res","err","executeCode","code","error","formatPythonCode","downloadDatabase","response","blob","url","a"],"mappings":"kCAEa,MAAAA,EAAiB,MAAOC,EAAeC,IAGvC,MAAM,MAAM,GAAGC,CAAkB,yBAAyBD,CAAK,GAAI,CAC9E,OAAQ,MACR,QAAS,CACR,eAAgB,mBAChB,cAAe,UAAUD,CAAK,EAC/B,CAAA,CACA,EACC,KAAK,MAAOG,GAAQ,CACpB,GAAI,CAACA,EAAI,GAAU,MAAA,MAAMA,EAAI,KAAK,EAClC,OAAOA,EAAI,MAAK,CAChB,EACA,MAAOC,IACP,QAAQ,IAAIA,CAAG,EAER,KACP,EAKUC,EAAc,MAAOL,EAAeM,IAAiB,CACjE,IAAIC,EAAQ,KAEZ,MAAMJ,EAAM,MAAM,MAAM,GAAGD,CAAkB,sBAAuB,CACnE,OAAQ,OACR,QAAS,CACR,eAAgB,mBAChB,cAAe,UAAUF,CAAK,EAC/B,EACA,KAAM,KAAK,UAAU,CACpB,KAAAM,CAAA,CACA,CAAA,CACD,EACC,KAAK,MAAOH,GAAQ,CACpB,GAAI,CAACA,EAAI,GAAU,MAAA,MAAMA,EAAI,KAAK,EAClC,OAAOA,EAAI,MAAK,CAChB,EACA,MAAOC,IACP,QAAQ,IAAIA,CAAG,EAEPG,EAAAH,EACJA,EAAI,SACPG,EAAQH,EAAI,QAEN,KACP,EAEF,GAAIG,EACG,MAAAA,EAGA,OAAAJ,CACR,EAEaK,EAAmB,MAAOR,EAAeM,IAAiB,CACtE,IAAIC,EAAQ,KAEZ,MAAMJ,EAAM,MAAM,MAAM,GAAGD,CAAkB,qBAAsB,CAClE,OAAQ,OACR,QAAS,CACR,eAAgB,mBAChB,cAAe,UAAUF,CAAK,EAC/B,EACA,KAAM,KAAK,UAAU,CACpB,KAAAM,CAAA,CACA,CAAA,CACD,EACC,KAAK,MAAOH,GAAQ,CACpB,GAAI,CAACA,EAAI,GAAU,MAAA,MAAMA,EAAI,KAAK,EAClC,OAAOA,EAAI,MAAK,CAChB,EACA,MAAOC,IACP,QAAQ,IAAIA,CAAG,EAEPG,EAAAH,EACJA,EAAI,SACPG,EAAQH,EAAI,QAEN,KACP,EAEF,GAAIG,EACG,MAAAA,EAGA,OAAAJ,CACR,EAuDaM,EAAmB,MAAOT,GAAkB,CACxD,IAAIO,EAAQ,KA8BZ,GA5BY,MAAM,MAAM,GAAGL,CAAkB,qBAAsB,CAClE,OAAQ,MACR,QAAS,CACR,eAAgB,mBAChB,cAAe,UAAUF,CAAK,EAC/B,CAAA,CACA,EACC,KAAK,MAAOU,GAAa,CACrB,GAAA,CAACA,EAAS,GACP,MAAA,MAAMA,EAAS,OAEtB,OAAOA,EAAS,MAAK,CACrB,EACA,KAAMC,GAAS,CACf,MAAMC,EAAM,OAAO,IAAI,gBAAgBD,CAAI,EACrCE,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOD,EACTC,EAAE,SAAW,WACJ,SAAA,KAAK,YAAYA,CAAC,EAC3BA,EAAE,MAAM,EACD,OAAA,IAAI,gBAAgBD,CAAG,CAAA,CAC9B,EACA,MAAOR,IACP,QAAQ,IAAIA,CAAG,EACfG,EAAQH,EAAI,OACL,KACP,EAEEG,EACG,MAAAA,CAER"}