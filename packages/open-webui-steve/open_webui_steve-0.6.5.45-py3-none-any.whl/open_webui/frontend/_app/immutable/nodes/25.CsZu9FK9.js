import{s as Fe,D as je,E as He,a as $,d as u,f as c,i as S,g as p,n as de,e as v,c as w,P as wt,F as at,k as q,o as X,y as De,A as xe,p as it,j as Ke,S as ct,u as ue,t as ge,b as ve,h as we,B as Be,z as $t,H as rt,q as bt,M as kt}from"../chunks/25wJL1Su.js";import{S as Pe,i as We,t as x,g as Se,c as ze,a as F,b as L,d as K,m as j,e as H,f as Ve}from"../chunks/CPwzRg77.js";import{F as yt}from"../chunks/CU2r43ac.js";import{t as J}from"../chunks/8ef81IiG.js";import{g as It}from"../chunks/CJqw8RZz.js";import{p as Et}from"../chunks/VE9xsaDW.js";import{c as Dt,s as xt,u as Vt,n as Ft}from"../chunks/Cd_5PT-V.js";import{u as Ct,a as Tt}from"../chunks/jTbD-_aB.js";import{b as Nt,r as St,e as zt,f as Mt,u as Bt,h as Pt,g as Wt}from"../chunks/DXxIjooD.js";import{n as At,v as Ut}from"../chunks/ZGe3o3eu.js";import{S as Lt}from"../chunks/CsIdf5LU.js";import{e as dt}from"../chunks/DhTevsA5.js";import{F as Kt}from"../chunks/D4Peta5v.js";import{A as jt,D as Ht}from"../chunks/BVqZqTIk.js";import"../chunks/DNNm3mSk.js";import{D as Ot,M as lt}from"../chunks/CnW1HI6R.js";import{b as Rt}from"../chunks/w3uxpEZk.js";import{f as qt}from"../chunks/g5t9vw8M.js";import{T as st}from"../chunks/CQPtd9kS.js";import{F as Xt}from"../chunks/B2mZKq9x.js";import"../chunks/aTHIJebK.js";import{M as Yt}from"../chunks/CG-x5pAp.js";import{R as ft,V as Gt}from"../chunks/DtEdlqkR.js";import{X as Jt}from"../chunks/BSmfbEFC.js";import{M as Qt}from"../chunks/CSM3-mJl.js";import{C as Zt}from"../chunks/zb4Ka54D.js";import{C as el}from"../chunks/BKquMZBw.js";import{A as tl,L as ll}from"../chunks/IfD_r80j.js";function rl(s){let e,t;return{c(){e=je("svg"),t=je("path"),this.h()},l(l){e=He(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=He(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:de,o:de,d(l){l&&u(e)}}}function sl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class nl extends Pe{constructor(e){super(),We(this,e,sl,rl,Fe,{className:0,strokeWidth:1})}}function mt(s,e,t){const l=s.slice();return l[6]=e[t],l}function ht(s){var a,i,f,_,b,h;let e,t,l,r;function o(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Kt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((a=s[6])==null?void 0:a.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((_=s[6])==null?void 0:_.size)??((h=(b=s[6])==null?void 0:b.meta)==null?void 0:h.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",o),t.$on("dismiss",n),{c(){e=v("div"),L(t.$$.fragment),l=q(),this.h()},l(k){e=w(k,"DIV",{class:!0});var V=$(e);K(t.$$.fragment,V),l=X(V),V.forEach(u),this.h()},h(){c(e,"class","mt-1 px-2")},m(k,V){S(k,e,V),j(t,e,null),p(e,l),r=!0},p(k,V){var N,M,R,y,T,D;s=k;const E={};V&3&&(E.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),V&4&&(E.small=s[2]),V&2&&(E.item=s[6]),V&2&&(E.name=((N=s[6])==null?void 0:N.name)??((R=(M=s[6])==null?void 0:M.meta)==null?void 0:R.name)),V&2&&(E.size=((y=s[6])==null?void 0:y.size)??((D=(T=s[6])==null?void 0:T.meta)==null?void 0:D.size)??""),V&2&&(E.loading=s[6].status==="uploading"),t.$set(E)},i(k){r||(x(t.$$.fragment,k),r=!0)},o(k){F(t.$$.fragment,k),r=!1},d(k){k&&u(e),H(t)}}}function ol(s){let e,t,l=dt(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=ht(mt(s,l,n));const o=n=>F(r[n],1,1,()=>{r[n]=null});return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var a=$(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(u),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,a){S(n,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[a]){if(a&15){l=dt(n[1]);let i;for(i=0;i<l.length;i+=1){const f=mt(n,l,i);r[i]?(r[i].p(f,a),x(r[i],1)):(r[i]=ht(f),r[i].c(),x(r[i],1),r[i].m(e,null))}for(Se(),i=l.length;i<r.length;i+=1)o(i);ze()}},i(n){if(!t){for(let a=0;a<l.length;a+=1)x(r[a]);t=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)F(r[a]);t=!1},d(n){n&&u(e),wt(r,n)}}}function al(s,e,t){const l=at();let{selectedFileId:r=null}=e,{files:o=[]}=e,{small:n=!1}=e;const a=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,o=f.files),"small"in f&&t(2,n=f.small)},[r,o,n,l,a,i]}class il extends Pe{constructor(e){super(),We(this,e,al,ol,Fe,{selectedFileId:0,files:1,small:2})}}function cl(s){let e,t;return{c(){e=je("svg"),t=je("path"),this.h()},l(l){e=He(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=He(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:de,o:de,d(l){l&&u(e)}}}function fl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class ul extends Pe{constructor(e){super(),We(this,e,fl,cl,Fe,{className:0,strokeWidth:1})}}function dl(s){let e,t;return{c(){e=je("svg"),t=je("path"),this.h()},l(l){e=He(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=He(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),p(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:de,o:de,d(l){l&&u(e)}}}function ml(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class hl extends Pe{constructor(e){super(),We(this,e,ml,dl,Fe,{className:0,strokeWidth:1})}}function pl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(o){e=w(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ct(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(o,n){S(o,e,n),l||(r=ue(e,"click",s[9]),l=!0)},p:de,d(o){o&&u(e),l=!1,r()}}}function _l(s){let e,t;return e=new st({props:{content:s[2].t("Add Content"),$$slots:{default:[pl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r&4&&(o.content=l[2].t("Add Content")),r&4098&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function gl(s){let e,t,l,r=s[2].t("Upload files")+"",o,n;return e=new nl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload files")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function vl(s){let e,t,l,r=s[2].t("Upload directory")+"",o,n;return e=new Xt({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function wl(s){let e,t,l,r=s[2].t("Sync directory")+"",o,n;return e=new hl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function $l(s){let e,t;return e=new lt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[wl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r&4100&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function bl(s){let e,t,l,r=s[2].t("Add text content")+"",o,n;return e=new ul({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=v("div"),o=ge(r),this.h()},l(a){K(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=ve(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),S(a,t,i),S(a,l,i),p(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Add text content")+"")&&we(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function kl(s){let e,t,l,r,o,n,a,i;return e=new lt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[gl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new lt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[vl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),o=new st({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[$l]},$$scope:{ctx:s}}}),a=new lt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[bl]},$$scope:{ctx:s}}}),a.$on("click",s[8]),{c(){L(e.$$.fragment),t=q(),L(l.$$.fragment),r=q(),L(o.$$.fragment),n=q(),L(a.$$.fragment)},l(f){K(e.$$.fragment,f),t=X(f),K(l.$$.fragment,f),r=X(f),K(o.$$.fragment,f),n=X(f),K(a.$$.fragment,f)},m(f,_){j(e,f,_),S(f,t,_),j(l,f,_),S(f,r,_),j(o,f,_),S(f,n,_),j(a,f,_),i=!0},p(f,_){const b={};_&4100&&(b.$$scope={dirty:_,ctx:f}),e.$set(b);const h={};_&4100&&(h.$$scope={dirty:_,ctx:f}),l.$set(h);const k={};_&4&&(k.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),_&4100&&(k.$$scope={dirty:_,ctx:f}),o.$set(k);const V={};_&4100&&(V.$$scope={dirty:_,ctx:f}),a.$set(V)},i(f){i||(x(e.$$.fragment,f),x(l.$$.fragment,f),x(o.$$.fragment,f),x(a.$$.fragment,f),i=!0)},o(f){F(e.$$.fragment,f),F(l.$$.fragment,f),F(o.$$.fragment,f),F(a.$$.fragment,f),i=!1},d(f){f&&(u(t),u(r),u(n)),H(e,f),H(l,f),H(o,f),H(a,f)}}}function yl(s){let e,t,l;return t=new Rt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:qt,$$slots:{default:[kl]},$$scope:{ctx:s}}}),{c(){e=v("div"),L(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{slot:!0});var o=$(e);K(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"slot","content")},m(r,o){S(r,e,o),j(t,e,null),l=!0},p(r,o){const n={};o&4100&&(n.$$scope={dirty:o,ctx:r}),t.$set(n)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),H(t)}}}function Il(s){let e,t,l;function r(n){s[10](n)}let o={align:"end",$$slots:{content:[yl],default:[_l]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.show=s[1]),e=new Ot({props:o}),De.push(()=>Ve(e,"show",r)),e.$on("change",s[11]),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:n}),!t&&a&2&&(t=!0,i.show=n[1],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function El(s,e,t){let l;const r=at(),o=it("i18n");Ke(s,o,E=>t(2,l=E));let{onClose:n=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},_=()=>{r("sync",{type:"directory"})},b=()=>{r("upload",{type:"text"})},h=E=>{E.stopPropagation(),t(1,a=!0)};function k(E){a=E,t(1,a)}const V=E=>{E.detail===!1&&n()};return s.$$set=E=>{"onClose"in E&&t(0,n=E.onClose)},[n,a,l,r,o,i,f,_,b,h,k,V]}class Dl extends Pe{constructor(e){super(),We(this,e,El,Il,Fe,{onClose:0})}}function xl(s){let e,t;return e=new st({props:{content:s[4].t("Voice Input"),$$slots:{default:[Fl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r&16&&(o.content=l[4].t("Voice Input")),r&65560&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Vl(s){let e,t,l,r;function o(a){s[10](a)}let n={className:"p-1"};return s[3]!==void 0&&(n.recording=s[3]),t=new Gt({props:n}),De.push(()=>Ve(t,"recording",o)),t.$on("cancel",s[11]),t.$on("confirm",s[12]),{c(){e=v("div"),L(t.$$.fragment),this.h()},l(a){e=w(a,"DIV",{class:!0});var i=$(e);K(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","max-w-full w-full")},m(a,i){S(a,e,i),j(t,e,null),r=!0},p(a,i){const f={};!l&&i&8&&(l=!0,f.recording=a[3],xe(()=>l=!1)),t.$set(f)},i(a){r||(x(t.$$.fragment,a),r=!0)},o(a){F(t.$$.fragment,a),r=!1},d(a){a&&u(e),H(t)}}}function Fl(s){let e,t,l,r,o;return t=new Qt({props:{className:"size-5"}}),{c(){e=v("button"),L(t.$$.fragment),this.h()},l(n){e=w(n,"BUTTON",{class:!0,type:!0});var a=$(e);K(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,a){S(n,e,a),j(t,e,null),l=!0,r||(o=ue(e,"click",s[13]),r=!0)},p:de,i(n){l||(x(t.$$.fragment,n),l=!0)},o(n){F(t.$$.fragment,n),l=!1},d(n){n&&u(e),H(t),r=!1,o()}}}function Cl(s){let e,t=s[4].t("Save")+"",l;return{c(){e=v("button"),l=ge(t),this.h()},l(r){e=w(r,"BUTTON",{class:!0,type:!0});var o=$(e);l=ve(o,t),o.forEach(u),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,o){S(r,e,o),p(e,l)},p(r,o){o&16&&t!==(t=r[4].t("Save")+"")&&we(l,t)},d(r){r&&u(e)}}}function Tl(s){let e,t,l,r,o,n,a,i,f,_,b,h,k,V,E,N,M,R,y,T,D,W,U,m,g,P,O;l=new Jt({props:{className:"size-3.5"}});function Y(z){s[9](z)}let re={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(re.value=s[2]),E=new ft({props:re}),De.push(()=>Ve(E,"value",Y));const oe=[Vl,xl],Q=[];function me(z,Z){return z[3]?0:1}return T=me(s),D=Q[T]=oe[T](s),m=new st({props:{content:s[4].t("Save"),$$slots:{default:[Cl]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("button"),L(l.$$.fragment),r=q(),o=v("div"),n=v("form"),a=v("div"),i=v("div"),f=v("div"),_=v("div"),b=v("input"),k=q(),V=v("div"),L(E.$$.fragment),M=q(),R=v("div"),y=v("div"),D.c(),W=q(),U=v("div"),L(m.$$.fragment),this.h()},l(z){e=w(z,"DIV",{class:!0});var Z=$(e);t=w(Z,"BUTTON",{class:!0,type:!0});var le=$(t);K(l.$$.fragment,le),le.forEach(u),Z.forEach(u),r=X(z),o=w(z,"DIV",{class:!0});var he=$(o);n=w(he,"FORM",{class:!0});var pe=$(n);a=w(pe,"DIV",{class:!0});var $e=$(a);i=w($e,"DIV",{class:!0});var ae=$(i);f=w(ae,"DIV",{class:!0});var Ce=$(f);_=w(Ce,"DIV",{class:!0});var ie=$(_);b=w(ie,"INPUT",{class:!0,type:!0,placeholder:!0}),ie.forEach(u),Ce.forEach(u),k=X(ae),V=w(ae,"DIV",{class:!0});var ce=$(V);K(E.$$.fragment,ce),ce.forEach(u),ae.forEach(u),$e.forEach(u),M=X(pe),R=w(pe,"DIV",{class:!0});var be=$(R);y=w(be,"DIV",{class:!0});var _e=$(y);D.l(_e),_e.forEach(u),W=X(be),U=w(be,"DIV",{class:!0});var Me=$(U);K(m.$$.fragment,Me),Me.forEach(u),be.forEach(u),pe.forEach(u),he.forEach(u),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(b,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(b,"type","text"),c(b,"placeholder",h=s[4].t("Title")),b.required=!0,c(_,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(V,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(y,"class",""),c(U,"class","shrink-0"),c(R,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(o,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(z,Z){S(z,e,Z),p(e,t),j(l,t,null),S(z,r,Z),S(z,o,Z),p(o,n),p(n,a),p(a,i),p(i,f),p(f,_),p(_,b),Be(b,s[1]),p(i,k),p(i,V),j(E,V,null),p(n,M),p(n,R),p(R,y),Q[T].m(y,null),p(R,W),p(R,U),j(m,U,null),g=!0,P||(O=[ue(t,"click",s[7]),ue(b,"input",s[8]),ue(n,"submit",$t(s[14]))],P=!0)},p(z,Z){(!g||Z&16&&h!==(h=z[4].t("Title")))&&c(b,"placeholder",h),Z&2&&b.value!==z[1]&&Be(b,z[1]);const le={};Z&16&&(le.placeholder=z[4].t("Write something...")),!N&&Z&4&&(N=!0,le.value=z[2],xe(()=>N=!1)),E.$set(le);let he=T;T=me(z),T===he?Q[T].p(z,Z):(Se(),F(Q[he],1,1,()=>{Q[he]=null}),ze(),D=Q[T],D?D.p(z,Z):(D=Q[T]=oe[T](z),D.c()),x(D,1),D.m(y,null));const pe={};Z&16&&(pe.content=z[4].t("Save")),Z&65552&&(pe.$$scope={dirty:Z,ctx:z}),m.$set(pe)},i(z){g||(x(l.$$.fragment,z),x(E.$$.fragment,z),x(D),x(m.$$.fragment,z),g=!0)},o(z){F(l.$$.fragment,z),F(E.$$.fragment,z),F(D),F(m.$$.fragment,z),g=!1},d(z){z&&(u(e),u(r),u(o)),H(l),H(E),Q[T].d(),H(m),P=!1,rt(O)}}}function Nl(s){let e,t,l;function r(n){s[15](n)}let o={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Tl]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new Yt({props:o}),De.push(()=>Ve(e,"show",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:n}),!t&&a&1&&(t=!0,i.show=n[0],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Sl(s,e,t){let l;const r=it("i18n");Ke(s,r,y=>t(4,l=y));const o=at();let{show:n=!1}=e,a="Untitled",i="",f=!1;const _=()=>{t(0,n=!1)};function b(){a=this.value,t(1,a)}function h(y){i=y,t(2,i)}function k(y){f=y,t(3,f)}const V=()=>{t(3,f=!1)},E=y=>{const{text:T,filename:D}=y.detail;t(2,i=`${i}${T} `),t(3,f=!1)},N=async()=>{try{let y=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(T){return J.error(l.t("Permission denied when accessing microphone: {{error}}",{error:T})),null});y&&(t(3,f=!0),y.getTracks().forEach(D=>D.stop())),y=null}catch{J.error(l.t("Permission denied when accessing microphone"))}},M=()=>{if(a.trim()===""||i.trim()===""){J.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}o("submit",{name:a,content:i}),t(0,n=!1),t(1,a=""),t(2,i="")};function R(y){n=y,t(0,n)}return s.$$set=y=>{"show"in y&&t(0,n=y.show)},[n,a,i,f,l,r,o,_,b,h,k,V,E,N,M,R]}class zl extends Pe{constructor(e){super(),We(this,e,Sl,Nl,Fe,{show:0})}}function pt(s){let e,t,l,r,o,n,a;return o=new jt({props:{$$slots:{default:[Ml]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),L(o.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=$(e);t=w(f,"DIV",{class:!0});var _=$(t);l=w(_,"DIV",{class:!0});var b=$(l);r=w(b,"DIV",{class:!0});var h=$(r);K(o.$$.fragment,h),h.forEach(u),b.forEach(u),_.forEach(u),f.forEach(u),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){S(i,e,f),p(e,t),p(t,l),p(l,r),j(o,r,null),a=!0},p(i,f){const _={};f[2]&32&&(_.$$scope={dirty:f,ctx:i}),o.$set(_),(!a||f[0]&8192&&n!==(n="fixed "+(i[13]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){a||(x(o.$$.fragment,i),a=!0)},o(i){F(o.$$.fragment,i),a=!1},d(i){i&&u(e),H(o)}}}function Ml(s){let e,t="Drop any files here to add to my documents";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),ct(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){S(l,e,r)},p:de,d(l){l&&u(e)}}}function Bl(s){let e,t;return e=new Lt({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:de,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Pl(s){var Qe,Ze,et,tt;let e,t,l,r,o,n,a,i,f,_,b,h,k,V,E,N,M=s[12].t("Access")+"",R,y,T,D,W,U,m,g,P,O,Y,re,oe,Q,me,z='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',Z,le,he,pe,$e,ae,Ce,ie,ce,be,_e,Me,qe;function nt(I){s[33](I)}function ot(I){s[34](I)}let Oe={allowPublic:((et=(Ze=(Qe=s[14])==null?void 0:Qe.permissions)==null?void 0:Ze.sharing)==null?void 0:et.public_knowledge)||((tt=s[14])==null?void 0:tt.role)==="admin",onChange:s[32],accessRoles:["read","write"]};s[7]!==void 0&&(Oe.show=s[7]),s[0].access_control!==void 0&&(Oe.accessControl=s[0].access_control),e=new tl({props:Oe}),De.push(()=>Ve(e,"show",nt)),De.push(()=>Ve(e,"accessControl",ot)),V=new ll({props:{strokeWidth:"2.5",className:"size-3.5"}});const Xe=[Al,Wl],ke=[];function Ye(I,ee){return I[3]?0:!I[3]&&I[2]!==null?1:-1}~(m=Ye(s))&&(g=ke[m]=Xe[m](s)),ae=new Dl({}),ae.$on("upload",s[49]),ae.$on("sync",s[50]);const Ge=[Hl,jl],ye=[];function Je(I,ee){return I[9].length>0?0:1}return ie=Je(s),ce=ye[ie]=Ge[ie](s),{c(){L(e.$$.fragment),r=q(),o=v("div"),n=v("div"),a=v("div"),i=v("div"),f=v("div"),_=v("input"),b=q(),h=v("div"),k=v("button"),L(V.$$.fragment),E=q(),N=v("div"),R=ge(M),y=q(),T=v("div"),D=v("input"),W=q(),U=v("div"),g&&g.c(),P=q(),O=v("div"),Y=v("div"),re=v("div"),oe=v("div"),Q=v("div"),me=v("div"),me.innerHTML=z,Z=q(),le=v("input"),pe=q(),$e=v("div"),L(ae.$$.fragment),Ce=q(),ce.c(),this.h()},l(I){K(e.$$.fragment,I),r=X(I),o=w(I,"DIV",{class:!0});var ee=$(o);n=w(ee,"DIV",{class:!0});var Te=$(n);a=w(Te,"DIV",{class:!0});var Ie=$(a);i=w(Ie,"DIV",{class:!0});var Ee=$(i);f=w(Ee,"DIV",{class:!0});var Ae=$(f);_=w(Ae,"INPUT",{type:!0,class:!0,placeholder:!0}),Ae.forEach(u),b=X(Ee),h=w(Ee,"DIV",{class:!0});var Ue=$(h);k=w(Ue,"BUTTON",{class:!0,type:!0});var Ne=$(k);K(V.$$.fragment,Ne),E=X(Ne),N=w(Ne,"DIV",{class:!0});var Le=$(N);R=ve(Le,M),Le.forEach(u),Ne.forEach(u),Ue.forEach(u),Ee.forEach(u),y=X(Ie),T=w(Ie,"DIV",{class:!0});var d=$(T);D=w(d,"INPUT",{type:!0,class:!0,placeholder:!0}),d.forEach(u),Ie.forEach(u),Te.forEach(u),ee.forEach(u),W=X(I),U=w(I,"DIV",{class:!0});var C=$(U);g&&g.l(C),P=X(C),O=w(C,"DIV",{class:!0});var B=$(O);Y=w(B,"DIV",{class:!0});var A=$(Y);re=w(A,"DIV",{class:!0});var te=$(re);oe=w(te,"DIV",{class:!0});var ne=$(oe);Q=w(ne,"DIV",{class:!0});var se=$(Q);me=w(se,"DIV",{class:!0,"data-svelte-h":!0}),ct(me)!=="svelte-or7cnz"&&(me.innerHTML=z),Z=X(se),le=w(se,"INPUT",{class:!0,placeholder:!0}),pe=X(se),$e=w(se,"DIV",{});var G=$($e);K(ae.$$.fragment,G),G.forEach(u),se.forEach(u),ne.forEach(u),Ce=X(te),ce.l(te),te.forEach(u),A.forEach(u),B.forEach(u),C.forEach(u),this.h()},h(){c(_,"type","text"),c(_,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(_,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(N,"class","text-sm font-medium shrink-0"),c(k,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(k,"type","button"),c(h,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(D,"type","text"),c(D,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(D,"placeholder","Knowledge Description"),c(T,"class","flex w-full px-1"),c(a,"class","flex-1"),c(n,"class","flex w-full"),c(o,"class","w-full mb-2.5"),c(me,"class","self-center ml-1 mr-3"),c(le,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(le,"placeholder",he=s[12].t("Search Collection")),c(Q,"class","flex mb-0.5"),c(oe,"class","px-3"),c(re,"class","w-full h-full flex flex-col"),c(Y,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(O,"class",be=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(U,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(I,ee){j(e,I,ee),S(I,r,ee),S(I,o,ee),p(o,n),p(n,a),p(a,i),p(i,f),p(f,_),Be(_,s[0].name),p(i,b),p(i,h),p(h,k),j(V,k,null),p(k,E),p(k,N),p(N,R),p(a,y),p(a,T),p(T,D),Be(D,s[0].description),S(I,W,ee),S(I,U,ee),~m&&ke[m].m(U,null),p(U,P),p(U,O),p(O,Y),p(Y,re),p(re,oe),p(oe,Q),p(Q,me),p(Q,Z),p(Q,le),Be(le,s[1]),p(Q,pe),p(Q,$e),j(ae,$e,null),p(re,Ce),ye[ie].m(re,null),_e=!0,Me||(qe=[ue(_,"input",s[35]),ue(_,"input",s[36]),ue(k,"click",s[37]),ue(D,"input",s[38]),ue(D,"input",s[39]),ue(le,"input",s[47]),ue(le,"focus",s[48])],Me=!0)},p(I,ee){var Ae,Ue,Ne,Le;const Te={};ee[0]&16384&&(Te.allowPublic=((Ne=(Ue=(Ae=I[14])==null?void 0:Ae.permissions)==null?void 0:Ue.sharing)==null?void 0:Ne.public_knowledge)||((Le=I[14])==null?void 0:Le.role)==="admin"),!t&&ee[0]&128&&(t=!0,Te.show=I[7],xe(()=>t=!1)),!l&&ee[0]&1&&(l=!0,Te.accessControl=I[0].access_control,xe(()=>l=!1)),e.$set(Te),ee[0]&1&&_.value!==I[0].name&&Be(_,I[0].name),(!_e||ee[0]&4096)&&M!==(M=I[12].t("Access")+"")&&we(R,M),ee[0]&1&&D.value!==I[0].description&&Be(D,I[0].description);let Ie=m;m=Ye(I),m===Ie?~m&&ke[m].p(I,ee):(g&&(Se(),F(ke[Ie],1,1,()=>{ke[Ie]=null}),ze()),~m?(g=ke[m],g?g.p(I,ee):(g=ke[m]=Xe[m](I),g.c()),x(g,1),g.m(U,P)):g=null),(!_e||ee[0]&4096&&he!==(he=I[12].t("Search Collection")))&&c(le,"placeholder",he),ee[0]&2&&le.value!==I[1]&&Be(le,I[1]);let Ee=ie;ie=Je(I),ie===Ee?ye[ie].p(I,ee):(Se(),F(ye[Ee],1,1,()=>{ye[Ee]=null}),ze(),ce=ye[ie],ce?ce.p(I,ee):(ce=ye[ie]=Ge[ie](I),ce.c()),x(ce,1),ce.m(re,null)),(!_e||ee[0]&8&&be!==(be=(I[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(O,"class",be)},i(I){_e||(x(e.$$.fragment,I),x(V.$$.fragment,I),x(g),x(ae.$$.fragment,I),x(ce),_e=!0)},o(I){F(e.$$.fragment,I),F(V.$$.fragment,I),F(g),F(ae.$$.fragment,I),F(ce),_e=!1},d(I){I&&(u(r),u(o),u(W),u(U)),H(e,I),H(V),~m&&ke[m].d(),H(ae),ye[ie].d(),Me=!1,rt(qe)}}}function Wl(s){let e,t;return e=new Ht({props:{className:"h-full",show:s[2]!==null,$$slots:{default:[Ul]},$$scope:{ctx:s}}}),e.$on("close",s[46]),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const o={};r[0]&4&&(o.show=l[2]!==null),r[0]&5124|r[2]&32&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Al(s){let e,t,l,r;const o=[Kl,Ll],n=[];function a(i,f){return i[10]?0:1}return t=a(s),l=n[t]=o[t](s),{c(){e=v("div"),l.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=$(e);l.l(f),f.forEach(u),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){S(i,e,f),n[t].m(e,null),r=!0},p(i,f){let _=t;t=a(i),t===_?n[t].p(i,f):(Se(),F(n[_],1,1,()=>{n[_]=null}),ze(),l=n[t],l?l.p(i,f):(l=n[t]=o[t](i),l.c()),x(l,1),l.m(e,null))},i(i){r||(x(l),r=!0)},o(i){F(l),r=!1},d(i){i&&u(e),n[t].d()}}}function _t(s){let e,t,l;function r(n){s[45](n)}let o={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(o.value=s[10].data.content),e=new ft({props:o}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,a){const i={};a[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&a[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function Ul(s){var U,m;let e,t,l,r,o,n,a,i,f=((m=(U=s[10])==null?void 0:U.meta)==null?void 0:m.name)+"",_,b,h,k,V=s[12].t("Save")+"",E,N,M,R=s[10].id,y,T,D;n=new el({props:{strokeWidth:"2.5"}});let W=_t(s);return{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),o=v("button"),L(n.$$.fragment),a=q(),i=v("div"),_=ge(f),b=q(),h=v("div"),k=v("button"),E=ge(V),N=q(),M=v("div"),W.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var P=$(e);t=w(P,"DIV",{class:!0});var O=$(t);l=w(O,"DIV",{class:!0});var Y=$(l);r=w(Y,"DIV",{class:!0});var re=$(r);o=w(re,"BUTTON",{class:!0});var oe=$(o);K(n.$$.fragment,oe),oe.forEach(u),re.forEach(u),a=X(Y),i=w(Y,"DIV",{class:!0});var Q=$(i);_=ve(Q,f),Q.forEach(u),b=X(Y),h=w(Y,"DIV",{});var me=$(h);k=w(me,"BUTTON",{class:!0});var z=$(k);E=ve(z,V),z.forEach(u),me.forEach(u),Y.forEach(u),N=X(O),M=w(O,"DIV",{class:!0});var Z=$(M);W.l(Z),Z.forEach(u),O.forEach(u),P.forEach(u),this.h()},h(){c(o,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(k,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(M,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(g,P){S(g,e,P),p(e,t),p(t,l),p(l,r),p(r,o),j(n,o,null),p(l,a),p(l,i),p(i,_),p(l,b),p(l,h),p(h,k),p(k,E),p(t,N),p(t,M),W.m(M,null),y=!0,T||(D=[ue(o,"click",s[43]),ue(k,"click",s[44])],T=!0)},p(g,P){var O,Y;(!y||P[0]&1024)&&f!==(f=((Y=(O=g[10])==null?void 0:O.meta)==null?void 0:Y.name)+"")&&we(_,f),(!y||P[0]&4096)&&V!==(V=g[12].t("Save")+"")&&we(E,V),P[0]&1024&&Fe(R,R=g[10].id)?(Se(),F(W,1,1,de),ze(),W=_t(g),W.c(),x(W,1),W.m(M,null)):W.p(g,P)},i(g){y||(x(n.$$.fragment,g),x(W),y=!0)},o(g){F(n.$$.fragment,g),F(W),y=!1},d(g){g&&u(e),H(n),W.d(g),T=!1,rt(D)}}}function Ll(s){let e,t,l=s[12].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=v("div"),t=v("div"),r=ge(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{class:!0});var a=$(t);r=ve(a,l),a.forEach(u),n.forEach(u),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(o,n){S(o,e,n),p(e,t),p(t,r)},p(o,n){n[0]&4096&&l!==(l=o[12].t("Drag and drop a file to upload or select a file to view")+"")&&we(r,l)},i:de,o:de,d(o){o&&u(e)}}}function Kl(s){var W,U;let e,t,l,r,o,n=s[24]((U=(W=s[10])==null?void 0:W.meta)==null?void 0:U.name)+"",a,i,f,_,b,h=s[12].t("Save")+"",k,V,E,N=s[10].id,M,R,y,T=!Rl,D=gt(s);return{c(){e=v("div"),t=v("div"),l=q(),r=v("div"),o=v("a"),a=ge(n),f=q(),_=v("div"),b=v("button"),k=ge(h),V=q(),E=v("div"),D.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var g=$(e);t=w(g,"DIV",{class:!0});var P=$(t);l=X(P),r=w(P,"DIV",{class:!0});var O=$(r);o=w(O,"A",{class:!0,href:!0,target:!0});var Y=$(o);a=ve(Y,n),Y.forEach(u),O.forEach(u),f=X(P),_=w(P,"DIV",{});var re=$(_);b=w(re,"BUTTON",{class:!0});var oe=$(b);k=ve(oe,h),oe.forEach(u),re.forEach(u),P.forEach(u),V=X(g),E=w(g,"DIV",{class:!0});var Q=$(E);D.l(Q),Q.forEach(u),g.forEach(u),this.h()},h(){c(o,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(o,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(o,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(b,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c(E,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,g){S(m,e,g),p(e,t),p(t,l),p(t,r),p(r,o),p(o,a),p(t,f),p(t,_),p(_,b),p(b,k),p(e,V),p(e,E),D.m(E,null),M=!0,R||(y=ue(b,"click",s[41]),R=!0)},p(m,g){var P,O;(!M||g[0]&1024)&&n!==(n=m[24]((O=(P=m[10])==null?void 0:P.meta)==null?void 0:O.name)+"")&&we(a,n),(!M||g[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(o,"href",i),(!M||g[0]&4096)&&h!==(h=m[12].t("Save")+"")&&we(k,h),g[0]&1024&&Fe(N,N=m[10].id)?(Se(),F(D,1,1,de),ze(),D=gt(m),D.c(),x(D,1),D.m(E,null)):D.p(m,g)},i(m){M||(x(T),x(D),M=!0)},o(m){F(T),F(D),M=!1},d(m){m&&u(e),D.d(m),R=!1,y()}}}function gt(s){let e,t,l;function r(n){s[42](n)}let o={className:"input-prose-sm",placeholder:s[12].t("Add content here"),preserveBreaks:!0};return s[10].data.content!==void 0&&(o.value=s[10].data.content),e=new ft({props:o}),De.push(()=>Ve(e,"value",r)),{c(){L(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,a){j(e,n,a),l=!0},p(n,a){const i={};a[0]&4096&&(i.placeholder=n[12].t("Add content here")),!t&&a[0]&1024&&(t=!0,i.value=n[10].data.content,xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){H(e,n)}}}function jl(s){let e,t,l=s[12].t("No content found")+"",r;return{c(){e=v("div"),t=v("div"),r=ge(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{});var a=$(t);r=ve(a,l),a.forEach(u),n.forEach(u),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(o,n){S(o,e,n),p(e,t),p(t,r)},p(o,n){n[0]&4096&&l!==(l=o[12].t("No content found")+"")&&we(r,l)},i:de,o:de,d(o){o&&u(e)}}}function Hl(s){let e,t,l;return t=new il({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[51]),t.$on("delete",s[52]),{c(){e=v("div"),L(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var o=$(e);K(t.$$.fragment,o),o.forEach(u),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,o){S(r,e,o),j(t,e,null),l=!0},p(r,o){const n={};o[0]&512&&(n.files=r[9]),o[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),H(t)}}}function Ol(s){let e,t,l,r,o,n,a,i,f,_,b,h,k,V,E,N=s[11]&&pt(s);function M(m){s[26](m)}let R={message:s[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(R.show=s[6]),t=new Zt({props:R}),De.push(()=>Ve(t,"show",M)),t.$on("confirm",s[27]);function y(m){s[28](m)}let T={};s[5]!==void 0&&(T.show=s[5]),o=new zl({props:T}),De.push(()=>Ve(o,"show",y)),o.$on("submit",s[29]);const D=[Pl,Bl],W=[];function U(m,g){return m[4]&&m[0]?0:1}return b=U(s),h=W[b]=D[b](s),{c(){N&&N.c(),e=q(),L(t.$$.fragment),r=q(),L(o.$$.fragment),a=q(),i=v("input"),f=q(),_=v("div"),h.c(),this.h()},l(m){N&&N.l(m),e=X(m),K(t.$$.fragment,m),r=X(m),K(o.$$.fragment,m),a=X(m),i=w(m,"INPUT",{id:!0,type:!0}),f=X(m),_=w(m,"DIV",{class:!0,id:!0});var g=$(_);h.l(g),g.forEach(u),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(_,"class","flex flex-col w-full translate-y-1"),c(_,"id","collection-container")},m(m,g){N&&N.m(m,g),S(m,e,g),j(t,m,g),S(m,r,g),j(o,m,g),S(m,a,g),S(m,i,g),S(m,f,g),S(m,_,g),W[b].m(_,null),k=!0,V||(E=[ue(i,"change",s[30]),ue(i,"change",s[31])],V=!0)},p(m,g){m[11]?N?(N.p(m,g),g[0]&2048&&x(N,1)):(N=pt(m),N.c(),x(N,1),N.m(e.parentNode,e)):N&&(Se(),F(N,1,1,()=>{N=null}),ze());const P={};g[0]&4096&&(P.message=m[12].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&g[0]&64&&(l=!0,P.show=m[6],xe(()=>l=!1)),t.$set(P);const O={};!n&&g[0]&32&&(n=!0,O.show=m[5],xe(()=>n=!1)),o.$set(O);let Y=b;b=U(m),b===Y?W[b].p(m,g):(Se(),F(W[Y],1,1,()=>{W[Y]=null}),ze(),h=W[b],h?h.p(m,g):(h=W[b]=D[b](m),h.c()),x(h,1),h.m(_,null))},i(m){k||(x(N),x(t.$$.fragment,m),x(o.$$.fragment,m),x(h),k=!0)},o(m){F(N),F(t.$$.fragment,m),F(o.$$.fragment,m),F(h),k=!1},d(m){m&&(u(e),u(r),u(a),u(i),u(f),u(_)),N&&N.d(m),H(t,m),H(o,m),W[b].d(),V=!1,rt(E)}}}let Rl=!0;function ql(s,e,t){let l,r,o,n,a;Ke(s,Et,d=>t(56,l=d)),Ke(s,Dt,d=>t(57,o=d)),Ke(s,xt,d=>t(13,n=d)),Ke(s,Vt,d=>t(14,a=d));const i=it("i18n");Ke(s,i,d=>t(12,r=d));let f=!0,_,b=null,h=null,k="",V=!1,E=!1,N=!1,M=null,R=[],y=null,T=null,D=null,W=null,U,m=!1;const g=(d,C)=>{const B=new Blob([C],{type:"text/plain"}),A=At(B,`${d}.txt`);return console.log(A),A},P=async d=>{var A,te,ne,se;console.log(d);const C=Ut(),B={type:"file",file:"",id:null,url:"",name:d.name,size:d.size,status:"uploading",error:"",itemId:C};if(B.size==0)return J.error(r.t("You cannot upload an empty file.")),null;if((((A=o==null?void 0:o.file)==null?void 0:A.max_size)??null)!==null&&d.size>(((te=o==null?void 0:o.file)==null?void 0:te.max_size)??0)*1024*1024){console.log("File exceeds max size limit:",{fileSize:d.size,maxSize:(((ne=o==null?void 0:o.file)==null?void 0:ne.max_size)??0)*1024*1024}),J.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(se=o==null?void 0:o.file)==null?void 0:se.max_size}));return}t(0,h.files=[...h.files??[],B],h);try{const G=await Ct(localStorage.token,d).catch(fe=>(J.error(`${fe}`),null));G?(console.log(G),t(0,h.files=h.files.map(fe=>(fe.itemId===C&&(fe.id=G.id),delete fe.itemId,fe)),h),await z(G.id)):J.error(r.t("Failed to upload file."))}catch(G){J.error(`${G}`)}},O=async()=>{const d="showDirectoryPicker"in window;try{d?await re():await oe()}catch(C){Q(C)}},Y=d=>d.split("/").some(C=>C.startsWith(".")),re=async()=>{const d=await window.showDirectoryPicker();let C=0,B=0;const A=()=>{const se=B/C*100;J.info(`Upload Progress: ${B}/${C} (${se.toFixed(2)}%)`)};async function te(se){for await(const G of se.values())G.name.startsWith(".")||(G.kind==="file"?C++:G.kind==="directory"&&(G.name.startsWith(".")||await te(G)))}async function ne(se,G=""){for await(const fe of se.values()){if(fe.name.startsWith("."))continue;const Re=G?`${G}/${fe.name}`:fe.name;if(!Y(Re))if(fe.kind==="file"){const ut=await fe.getFile(),vt=new File([ut],Re,{type:ut.type});await P(vt),B++,A()}else fe.kind==="directory"&&(fe.name.startsWith(".")||await ne(fe,Re))}}await te(d),A(),C>0?await ne(d):console.log("No files to upload.")},oe=async()=>new Promise((d,C)=>{const B=document.createElement("input");B.type="file",B.webkitdirectory=!0,B.directory=!0,B.multiple=!0,B.style.display="none",document.body.appendChild(B),B.onchange=async()=>{try{const A=Array.from(B.files).filter(G=>!Y(G.webkitRelativePath));let te=A.length,ne=0;const se=()=>{const G=ne/te*100;J.info(`Upload Progress: ${ne}/${te} (${G.toFixed(2)}%)`)};se();for(const G of A)if(!G.name.startsWith(".")){const fe=G.webkitRelativePath||G.name,Re=new File([G],fe,{type:G.type});await P(Re),ne++,se()}document.body.removeChild(B),d()}catch(A){C(A)}},B.onerror=A=>{document.body.removeChild(B),C(A)},B.click()}),Q=d=>{d.name==="AbortError"?J.info("Directory selection was cancelled"):(J.error("Error accessing directory"),console.error("Directory access error:",d))},me=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const d=await St(localStorage.token,b).catch(C=>{J.error(`${C}`)});d&&(t(0,h=d),J.success(r.t("Knowledge reset successfully.")),O())}else O()},z=async d=>{const C=await zt(localStorage.token,b,d).catch(B=>(J.error(`${B}`),null));C?(t(0,h=C),J.success(r.t("File added successfully."))):(J.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(B=>B.id!==d),h))},Z=async d=>{try{console.log("Starting file deletion process for:",d);const C=await Mt(localStorage.token,b,d);console.log("Knowledge base updated:",C),C&&(t(0,h=C),J.success(r.t("File removed successfully.")))}catch(C){console.error("Error in deleteFileHandler:",C),J.error(`${C}`)}},le=async()=>{const d=y.id,C=y.data.content,B=Tt(localStorage.token,d,C).catch(te=>{J.error(`${te}`)}),A=await Bt(localStorage.token,b,d).catch(te=>{J.error(`${te}`)});B&&A&&(t(0,h=A),J.success(r.t("File content updated successfully.")))},he=()=>{console.log("debounce"),W&&clearTimeout(W),W=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){J.error(r.t("Please fill in all fields."));return}await Pt(localStorage.token,b,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(C=>{J.error(`${C}`)})&&(J.success(r.t("Knowledge updated successfully")),Ft.set(await Wt(localStorage.token)))},1e3)},pe=async d=>{d.matches?t(3,f=!0):t(3,f=!1)},$e=d=>{var C,B;d.preventDefault(),(B=(C=d.dataTransfer)==null?void 0:C.types)!=null&&B.includes("Files")?t(11,m=!0):t(11,m=!1)},ae=()=>{t(11,m=!1)},Ce=async d=>{var C,B,A,te;if(d.preventDefault(),t(11,m=!1),(B=(C=d.dataTransfer)==null?void 0:C.types)!=null&&B.includes("Files")&&(A=d.dataTransfer)!=null&&A.files){const ne=(te=d.dataTransfer)==null?void 0:te.files;if(ne&&ne.length>0)for(const se of ne)await P(se);else J.error(r.t("File not found."))}};bt(async()=>{U=window.matchMedia("(min-width: 1024px)"),U.addEventListener("change",pe),pe(U);const d=document.getElementById("collection-container");f&&Math.floor(300/d.clientWidth*100),new ResizeObserver(te=>{for(let ne of te)ne.contentRect.width}).observe(d),t(4,b=l.params.id);const B=await Nt(localStorage.token,b).catch(te=>(J.error(`${te}`),null));B?t(0,h=B):It("/workspace/knowledge");const A=document.querySelector("body");A==null||A.addEventListener("dragover",$e),A==null||A.addEventListener("drop",Ce),A==null||A.addEventListener("dragleave",ae)}),kt(()=>{U==null||U.removeEventListener("change",pe);const d=document.querySelector("body");d==null||d.removeEventListener("dragover",$e),d==null||d.removeEventListener("drop",Ce),d==null||d.removeEventListener("dragleave",ae)});const ie=d=>{try{return decodeURIComponent(d)}catch{return d}};function ce(d){E=d,t(6,E)}const be=()=>{me()};function _e(d){V=d,t(5,V)}const Me=d=>{const C=g(d.detail.name,d.detail.content);P(C)};function qe(){M=this.files,t(8,M)}const nt=async()=>{if(M&&M.length>0){for(const C of M)await P(C);t(8,M=null);const d=document.getElementById("files-input");d&&(d.value="")}else J.error(r.t("File not found."))},ot=()=>{he()};function Oe(d){N=d,t(7,N)}function Xe(d){s.$$.not_equal(h.access_control,d)&&(h.access_control=d,t(0,h))}function ke(){h.name=this.value,t(0,h)}const Ye=()=>{he()},Ge=()=>{t(7,N=!0)};function ye(){h.description=this.value,t(0,h)}const Je=()=>{he()},Qe=()=>{_.expand()},Ze=()=>{le()};function et(d){s.$$.not_equal(y.data.content,d)&&(y.data.content=d,t(10,y),t(2,T),t(0,h))}const tt=()=>{t(2,T=null)},I=()=>{le()};function ee(d){s.$$.not_equal(y.data.content,d)&&(y.data.content=d,t(10,y),t(2,T),t(0,h))}const Te=()=>{t(2,T=null)};function Ie(){k=this.value,t(1,k)}const Ee=()=>{t(2,T=null)},Ae=d=>{d.detail.type==="directory"?O():d.detail.type==="text"?t(5,V=!0):document.getElementById("files-input").click()},Ue=d=>{t(6,E=!0)},Ne=d=>{t(2,T=T===d.detail?null:d.detail)},Le=d=>{console.log(d.detail),t(2,T=null),Z(d.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(25,D=new yt(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&33554435&&D&&t(9,R=k?D.search(k).map(d=>d.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(T){const d=((h==null?void 0:h.files)??[]).find(C=>C.id===T);d?(d.data=d.data??{content:""},t(10,y=d)):t(10,y=null)}else t(10,y=null)},[h,k,T,f,b,V,E,N,M,R,y,m,r,n,a,i,_,g,P,O,me,Z,le,he,ie,D,ce,be,_e,Me,qe,nt,ot,Oe,Xe,ke,Ye,Ge,ye,Je,Qe,Ze,et,tt,I,ee,Te,Ie,Ee,Ae,Ue,Ne,Le]}class Xl extends Pe{constructor(e){super(),We(this,e,ql,Ol,Fe,{},null,[-1,-1,-1])}}function Yl(s){let e,t;return e=new Xl({}),{c(){L(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:de,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}class Ir extends Pe{constructor(e){super(),We(this,e,null,Yl,Fe,{})}}export{Ir as component};
//# sourceMappingURL=25.CsZu9FK9.js.map
