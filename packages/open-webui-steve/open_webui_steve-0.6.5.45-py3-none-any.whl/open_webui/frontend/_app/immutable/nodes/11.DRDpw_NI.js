import{s as N,l as d,i as O,d as h,j as w,p as V,q,n as v}from"../chunks/25wJL1Su.js";import{S as y,i as W,t as f,a as _,c as R,g as F,b as B,d as C,m as M,e as P}from"../chunks/CPwzRg77.js";import{t as b}from"../chunks/8ef81IiG.js";import{g as D}from"../chunks/CJqw8RZz.js";import{a as J,c as Q,b as S,f as j,m as H}from"../chunks/Cd_5PT-V.js";import{c as L,g as z}from"../chunks/B6tpVwKp.js";import{F as A}from"../chunks/qvTRqsr7.js";import{g as G}from"../chunks/B6Smsz5d.js";import{e as K,c as T}from"../chunks/ZGe3o3eu.js";function k(a){var c;let r=(c=a[2])==null?void 0:c.content,n,o,e=I(a);return{c(){e.c(),n=d()},l(s){e.l(s),n=d()},m(s,t){e.m(s,t),O(s,n,t),o=!0},p(s,t){var l;t&4&&N(r,r=(l=s[2])==null?void 0:l.content)?(F(),_(e,1,1,v),R(),e=I(s),e.c(),f(e,1),e.m(n.parentNode,n)):e.p(s,t)},i(s){o||(f(e),o=!0)},o(s){_(e),o=!1},d(s){s&&h(n),e.d(s)}}}function I(a){var o,e,c,s;let r,n;return r=new A({props:{id:((o=a[2])==null?void 0:o.id)??"",name:((e=a[2])==null?void 0:e.name)??"",meta:((c=a[2])==null?void 0:c.meta)??{description:""},content:((s=a[2])==null?void 0:s.content)??"",clone:a[1],onSave:a[5]}}),{c(){B(r.$$.fragment)},l(t){C(r.$$.fragment,t)},m(t,l){M(r,t,l),n=!0},p(t,l){var p,g,i,m;const u={};l&4&&(u.id=((p=t[2])==null?void 0:p.id)??""),l&4&&(u.name=((g=t[2])==null?void 0:g.name)??""),l&4&&(u.meta=((i=t[2])==null?void 0:i.meta)??{description:""}),l&4&&(u.content=((m=t[2])==null?void 0:m.content)??""),l&2&&(u.clone=t[1]),r.$set(u)},i(t){n||(f(r.$$.fragment,t),n=!0)},o(t){_(r.$$.fragment,t),n=!1},d(t){P(r,t)}}}function X(a){let r,n,o=a[0]&&k(a);return{c(){o&&o.c(),r=d()},l(e){o&&o.l(e),r=d()},m(e,c){o&&o.m(e,c),O(e,r,c),n=!0},p(e,[c]){e[0]?o?(o.p(e,c),c&1&&f(o,1)):(o=k(e),o.c(),f(o,1),o.m(r.parentNode,r)):o&&(F(),_(o,1,1,()=>{o=null}),R())},i(e){n||(f(o),n=!0)},o(e){_(o),n=!1},d(e){e&&h(r),o&&o.d(e)}}}function Y(a,r,n){let o,e,c;w(a,J,i=>n(6,o=i)),w(a,Q,i=>n(7,e=i));const s=V("i18n");w(a,s,i=>n(8,c=i));let t=!1,l=!1,u=null;const p=async i=>{var E;const m=K(i.content);if(T((m==null?void 0:m.required_open_webui_version)??"0.0.0",S)){b.error(c.t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:S,REQUIRED_VERSION:(m==null?void 0:m.required_open_webui_version)??"0.0.0"}));return}await L(localStorage.token,{id:i.id,name:i.name,meta:i.meta,content:i.content}).catch(U=>(b.error(`${U}`),null))&&(b.success(c.t("Function created successfully")),j.set(await z(localStorage.token)),H.set(await G(localStorage.token,((E=e==null?void 0:e.features)==null?void 0:E.enable_direct_connections)&&((o==null?void 0:o.directConnections)??null))),await D("/admin/functions"))};return q(()=>{window.addEventListener("message",async i=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(i.origin)&&n(2,u=JSON.parse(i.data))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.function&&(n(2,u=JSON.parse(sessionStorage.function)),sessionStorage.removeItem("function"),n(1,l=!0)),n(0,t=!0)}),[t,l,u,s,p,i=>{p(i)}]}class ae extends y{constructor(r){super(),W(this,r,Y,X,N,{})}}export{ae as component};
//# sourceMappingURL=11.DRDpw_NI.js.map
