import{s as be,k as R,l as me,m as we,d,o as q,i as ee,j as A,p as ye,y as J,e as p,t as G,c as v,a as b,b as K,f as h,g as u,u as Se,h as Q,A as X,C as Y}from"../chunks/25wJL1Su.js";import{S as Ie,i as ke,t as z,a as se,c as Ee,f as Z,b as De,d as Me,m as Ve,e as Ce,g as Le}from"../chunks/CPwzRg77.js";import{g as x}from"../chunks/CJqw8RZz.js";import{p as Be}from"../chunks/VE9xsaDW.js";import{d as te}from"../chunks/aTHIJebK.js";import{h as ge,a as $,c as Ne,W as je,m as Ue}from"../chunks/Cd_5PT-V.js";import{l as Ae,b as Oe,d as Pe}from"../chunks/ZGe3o3eu.js";import{g as Te,c as We}from"../chunks/BDM6eJg_.js";import{M as Fe}from"../chunks/BdXf3P35.js";import{t as Re}from"../chunks/8ef81IiG.js";import"../chunks/CG-x5pAp.js";import"../chunks/DNNm3mSk.js";import{g as qe}from"../chunks/B6Smsz5d.js";import"../chunks/CF4_YkFU.js";import{g as ze,a as He}from"../chunks/BU3V_9GT.js";import"../chunks/3KLxZXMd.js";import"../chunks/CtiTb5Lv.js";import"../chunks/BhcWnQZe.js";function he(e){let m,t,i,n,s,a,f,j,E,D,I=te(e[4].chat.timestamp).format("LLL")+"",B,w,U,M,V,c,_,O,P,T,C,L,o,k=e[11].t("Clone Chat")+"",r,y,H,ae;function _e(l){e[16](l)}function pe(l){e[17](l)}function ve(l){e[18](l)}let W={className:"h-full flex pt-4 pb-8 ",user:e[5],chatId:e[8],readOnly:!0,selectedModels:e[3],processing:Ge,bottomPadding:e[13].length>0,sendPrompt:Ke,continueResponse:Qe,regenerateResponse:Xe};return e[0]!==void 0&&(W.history=e[0]),e[7]!==void 0&&(W.messages=e[7]),e[2]!==void 0&&(W.autoScroll=e[2]),c=new Fe({props:W}),J.push(()=>Z(c,"history",_e)),J.push(()=>Z(c,"messages",pe)),J.push(()=>Z(c,"autoScroll",ve)),{c(){m=p("div"),t=p("div"),i=p("div"),n=p("div"),s=p("div"),a=p("div"),f=G(e[6]),j=R(),E=p("div"),D=p("div"),B=G(I),U=R(),M=p("div"),V=p("div"),De(c.$$.fragment),T=R(),C=p("div"),L=p("div"),o=p("button"),r=G(k),this.h()},l(l){m=v(l,"DIV",{class:!0});var g=b(m);t=v(g,"DIV",{class:!0});var S=b(t);i=v(S,"DIV",{class:!0,id:!0});var N=b(i);n=v(N,"DIV",{class:!0});var oe=b(n);s=v(oe,"DIV",{class:!0});var F=b(s);a=v(F,"DIV",{class:!0});var le=b(a);f=K(le,e[6]),le.forEach(d),j=q(F),E=v(F,"DIV",{class:!0});var re=b(E);D=v(re,"DIV",{class:!0});var ie=b(D);B=K(ie,I),ie.forEach(d),re.forEach(d),F.forEach(d),oe.forEach(d),U=q(N),M=v(N,"DIV",{class:!0});var ne=b(M);V=v(ne,"DIV",{class:!0});var ce=b(V);Me(c.$$.fragment,ce),ce.forEach(d),ne.forEach(d),N.forEach(d),T=q(S),C=v(S,"DIV",{class:!0});var ue=b(C);L=v(ue,"DIV",{class:!0});var de=b(L);o=v(de,"BUTTON",{class:!0});var fe=b(o);r=K(fe,k),fe.forEach(d),de.forEach(d),ue.forEach(d),S.forEach(d),g.forEach(d),this.h()},h(){var l;h(a,"class","text-2xl font-semibold line-clamp-1"),h(D,"class","text-gray-400"),h(E,"class","flex text-sm justify-between items-center mt-1"),h(s,"class","px-3"),h(n,"class",w="pt-5 px-2 w-full "+(((l=e[9])==null?void 0:l.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"),h(V,"class","w-full"),h(M,"class","h-full w-full flex flex-col py-2"),h(i,"class","flex flex-col w-full flex-auto overflow-auto h-0"),h(i,"id","messages-container"),h(o,"class","px-4 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),h(L,"class","pb-5"),h(C,"class","absolute bottom-0 right-0 left-0 flex justify-center w-full bg-linear-to-b from-transparent to-white dark:to-gray-900"),h(t,"class","flex flex-col flex-auto justify-center relative"),h(m,"class","h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(l,g){ee(l,m,g),u(m,t),u(t,i),u(i,n),u(n,s),u(s,a),u(a,f),u(s,j),u(s,E),u(E,D),u(D,B),u(i,U),u(i,M),u(M,V),Ve(c,V,null),u(t,T),u(t,C),u(C,L),u(L,o),u(o,r),y=!0,H||(ae=Se(o,"click",e[14]),H=!0)},p(l,g){var N;(!y||g&64)&&Q(f,l[6]),(!y||g&16)&&I!==(I=te(l[4].chat.timestamp).format("LLL")+"")&&Q(B,I),(!y||g&512&&w!==(w="pt-5 px-2 w-full "+(((N=l[9])==null?void 0:N.widescreenMode)??null?"max-w-full":"max-w-5xl")+" mx-auto"))&&h(n,"class",w);const S={};g&32&&(S.user=l[5]),g&256&&(S.chatId=l[8]),g&8&&(S.selectedModels=l[3]),!_&&g&1&&(_=!0,S.history=l[0],X(()=>_=!1)),!O&&g&128&&(O=!0,S.messages=l[7],X(()=>O=!1)),!P&&g&4&&(P=!0,S.autoScroll=l[2],X(()=>P=!1)),c.$set(S),(!y||g&2048)&&k!==(k=l[11].t("Clone Chat")+"")&&Q(r,k)},i(l){y||(z(c.$$.fragment,l),y=!0)},o(l){se(c.$$.fragment,l),y=!1},d(l){l&&d(m),Ce(c),H=!1,ae()}}}function Je(e){let m,t,i,n;document.title=m=`\r
		`+(e[6]?`${e[6].length>30?`${e[6].slice(0,30)}...`:e[6]} | ${e[10]}`:`${e[10]}`)+`\r
	`;let s=e[1]&&he(e);return{c(){t=R(),s&&s.c(),i=me()},l(a){we("svelte-1123lr8",document.head).forEach(d),t=q(a),s&&s.l(a),i=me()},m(a,f){ee(a,t,f),s&&s.m(a,f),ee(a,i,f),n=!0},p(a,[f]){(!n||f&1088)&&m!==(m=`\r
		`+(a[6]?`${a[6].length>30?`${a[6].slice(0,30)}...`:a[6]} | ${a[10]}`:`${a[10]}`)+`\r
	`)&&(document.title=m),a[1]?s?(s.p(a,f),f&2&&z(s,1)):(s=he(a),s.c(),z(s,1),s.m(i.parentNode,i)):s&&(Le(),se(s,1,1,()=>{s=null}),Ee())},i(a){n||(z(s),n=!0)},o(a){se(s),n=!1},d(a){a&&(d(t),d(i)),s&&s.d(a)}}}let Ge="";const Ke=()=>{},Qe=()=>{},Xe=()=>{};function Ye(e,m,t){let i,n,s,a,f,j;A(e,ge,o=>t(8,i=o)),A(e,Be,o=>t(15,n=o)),A(e,$,o=>t(9,s=o)),A(e,Ne,o=>t(19,a=o)),A(e,je,o=>t(10,f=o));const E=ye("i18n");A(e,E,o=>t(11,j=o)),te.extend(Ae);let D=!1,I=!0,B=[""],w=null,U=null,M="",V=[],c=[],_={messages:{},currentId:null};const O=async()=>{var k;const o=await ze(localStorage.token).catch(r=>(console.error(r),null));if(o)$.set(o.ui);else{let r={};try{r=JSON.parse(localStorage.getItem("settings")??"{}")}catch(y){console.error("Failed to parse settings from localStorage",y)}$.set(r)}if(await Ue.set(await qe(localStorage.token,((k=a==null?void 0:a.features)==null?void 0:k.enable_direct_connections)&&((s==null?void 0:s.directConnections)??null))),await ge.set(n.params.id),t(4,w=await Te(localStorage.token,i).catch(async r=>(await x("/"),null))),w){t(5,U=await He(localStorage.token,w.user_id).catch(y=>(console.error(y),null)));const r=w.chat;return r?(t(3,B=((r==null?void 0:r.models)??void 0)!==void 0?r.models:[r.models??""]),t(0,_=((r==null?void 0:r.history)??void 0)!==void 0?r.history:Pe(r.messages)),t(6,M=r.title),t(2,I=!0),await Y(),c.length>0&&t(0,_.messages[c.at(-1).id].done=!0,_),await Y(),!0):null}},P=async()=>{if(!w)return;const o=await We(localStorage.token,w.id).catch(k=>(Re.error(`${k}`),null));o&&x(`/c/${o.id}`)};function T(o){_=o,t(0,_)}function C(o){c=o,t(7,c),t(0,_)}function L(o){I=o,t(2,I)}return e.$$.update=()=>{e.$$.dirty&1&&t(7,c=Oe(_,_.currentId)),e.$$.dirty&32768&&n.params.id&&(async()=>await O()?(await Y(),t(1,D=!0)):await x("/"))()},[_,D,I,B,w,U,M,c,i,s,f,j,E,V,P,n,T,C,L]}class hs extends Ie{constructor(m){super(),ke(this,m,Ye,Je,be,{})}}export{hs as component};
//# sourceMappingURL=37.D6-pwEVV.js.map
