{"version":3,"file":"20.ofcvIkEc.js","sources":["../../../../../../src/lib/components/playground/Notes.svelte"],"sourcesContent":["<script>\r\n\timport { getContext } from 'svelte';\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport RichTextInput from '../common/RichTextInput.svelte';\r\n\timport Spinner from '../common/Spinner.svelte';\r\n\timport Sparkles from '../icons/Sparkles.svelte';\r\n\timport SparklesSolid from '../icons/SparklesSolid.svelte';\r\n\timport Mic from '../icons/Mic.svelte';\r\n\timport VoiceRecording from '../chat/MessageInput/VoiceRecording.svelte';\r\n\timport Tooltip from '../common/Tooltip.svelte';\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\tlet name = '';\r\n\tlet content = '';\r\n\r\n\tlet voiceInput = false;\r\n\tlet loading = false;\r\n</script>\r\n\r\n<div class=\"relative flex-1 w-full h-full flex justify-center overflow-auto px-5\">\r\n\t{#if loading}\r\n\t\t<div class=\" absolute top-0 bottom-0 left-0 right-0 flex\">\r\n\t\t\t<div class=\"m-auto\">\r\n\t\t\t\t<Spinner />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t{/if}\r\n\r\n\t<div class=\" w-full flex flex-col gap-2 {loading ? 'opacity-20' : ''}\">\r\n\t\t<div class=\"shrink-0 w-full flex justify-between items-center\">\r\n\t\t\t<div class=\"w-full\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tclass=\"w-full text-2xl font-medium bg-transparent outline-hidden\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tbind:value={name}\r\n\t\t\t\t\tplaceholder={$i18n.t('Title')}\r\n\t\t\t\t\trequired\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\" flex-1 w-full h-full\">\r\n\t\t\t<RichTextInput\r\n\t\t\t\tclassName=\"input-prose-sm\"\r\n\t\t\t\tbind:value={content}\r\n\t\t\t\tplaceholder={$i18n.t('Write something...')}\r\n\t\t\t\tpreserveBreaks={true}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end\">\r\n\t\t<div class=\"flex gap-0.5 justify-end w-full\">\r\n\t\t\t{#if voiceInput}\r\n\t\t\t\t<div class=\"flex-1 w-full\">\r\n\t\t\t\t\t<VoiceRecording\r\n\t\t\t\t\t\tbind:recording={voiceInput}\r\n\t\t\t\t\t\tclassName=\"p-1 w-full max-w-full\"\r\n\t\t\t\t\t\ton:cancel={() => {\r\n\t\t\t\t\t\t\tvoiceInput = false;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ton:confirm={(e) => {\r\n\t\t\t\t\t\t\tconst { text, filename } = e.detail;\r\n\r\n\t\t\t\t\t\t\t// url is hostname + /cache/audio/transcription/ + filename\r\n\t\t\t\t\t\t\tconst url = `${window.location.origin}/cache/audio/transcription/${filename}`;\r\n\r\n\t\t\t\t\t\t\t// Open in new tab\r\n\r\n\t\t\t\t\t\t\tif (content.trim() !== '') {\r\n\t\t\t\t\t\t\t\tcontent = `${content}\\n\\n${text}\\n\\nRecording: ${url}\\n\\n`;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcontent = `${content}${text}\\n\\nRecording: ${url}\\n\\n`;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvoiceInput = false;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t{:else}\r\n\t\t\t\t<Tooltip content={$i18n.t('Voice Input')}>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition shadow-xl\"\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\ton:click={async () => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tlet stream = await navigator.mediaDevices\r\n\t\t\t\t\t\t\t\t\t.getUserMedia({ audio: true })\r\n\t\t\t\t\t\t\t\t\t.catch(function (err) {\r\n\t\t\t\t\t\t\t\t\t\ttoast.error(\r\n\t\t\t\t\t\t\t\t\t\t\t$i18n.t(`Permission denied when accessing microphone: {{error}}`, {\r\n\t\t\t\t\t\t\t\t\t\t\t\terror: err\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tif (stream) {\r\n\t\t\t\t\t\t\t\t\tvoiceInput = true;\r\n\t\t\t\t\t\t\t\t\tconst tracks = stream.getTracks();\r\n\t\t\t\t\t\t\t\t\ttracks.forEach((track) => track.stop());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstream = null;\r\n\t\t\t\t\t\t\t} catch {\r\n\t\t\t\t\t\t\t\ttoast.error($i18n.t('Permission denied when accessing microphone'));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Mic className=\"size-4\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t{/if}\r\n\r\n\t\t\t<!-- <button\r\n\t\t\t\tclass=\"cursor-pointer p-2.5 flex rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition shadow-xl\"\r\n\t\t\t>\r\n\t\t\t\t<SparklesSolid className=\"size-4\" />\r\n\t\t\t</button> -->\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n"],"names":["ctx","insert_hydration","target","div","anchor","button","loading","div6","append_hydration","div3","div1","div0","input","div2","div5","div4","i18n","getContext","name","content","voiceInput","value","$$invalidate","e","text","filename","url","stream","err","toast","$i18n","track"],"mappings":"4fAiFsBA,EAAK,CAAA,EAAC,EAAE,aAAa,oJAArBA,EAAK,CAAA,EAAC,EAAE,aAAa,mOAxBrBA,EAAU,CAAA,IAAA,qBAAVA,EAAU,CAAA,wQAF5BC,EAwBMC,EAAAC,EAAAC,CAAA,iEAtBYJ,EAAU,CAAA,0dAyB3BC,EA4BSC,EAAAG,EAAAD,CAAA,iNAzFRE,wEAyBWN,EAAK,CAAA,EAAC,EAAE,oBAAoB,iBACzB,IAFJA,EAAO,CAAA,IAAA,iBAAPA,EAAO,CAAA,gGASfA,EAAU,CAAA,EAAA,suBAlBAA,EAAK,CAAA,EAAC,EAAE,OAAO,CAAA,oLAPoC,6NATrEC,EAqGMC,EAAAK,EAAAH,CAAA,SA5FLI,EAqBMD,EAAAE,CAAA,EApBLD,EAUMC,EAAAC,CAAA,EATLF,EAQME,EAAAC,CAAA,EAPLH,EAMEG,EAAAC,CAAA,MAHWZ,EAAI,CAAA,CAAA,SAOnBQ,EAOMC,EAAAI,CAAA,qBAGPL,EAoEMD,EAAAO,CAAA,EAnELN,EAkEMM,EAAAC,CAAA,+EAnFUf,EAAK,CAAA,EAAC,EAAE,OAAO,yCADhBA,EAAI,CAAA,OAAJA,EAAI,CAAA,CAAA,iCAWJA,EAAK,CAAA,EAAC,EAAE,oBAAoB,0BAD7BA,EAAO,CAAA,0RA5BlB,IAAAM,GAAU,kCAfRU,EAAOC,GAAW,MAAM,sBAW1B,IAAAC,EAAO,GACPC,EAAU,GAEVC,EAAa,gBAmBDF,EAAI,KAAA,2BAULC,EAAOE,uBAYDD,EAAUC,qCAGzBC,EAAA,EAAAF,EAAa,EAAK,GAENG,GAAC,CACL,KAAA,CAAA,KAAAC,EAAM,SAAAC,GAAaF,EAAE,OAGvBG,KAAS,OAAO,SAAS,MAAM,8BAA8BD,CAAQ,GAIvEN,EAAQ,KAAI,IAAO,GACtBG,EAAA,EAAAH,EAAa,GAAAA,CAAO;AAAA;AAAA,EAAOK,CAAI;AAAA;AAAA,aAAkBE,CAAG;AAAA;AAAA,CAAA,EAEpDJ,EAAA,EAAAH,EAAa,GAAAA,CAAO,GAAGK,CAAI;AAAA;AAAA,aAAkBE,CAAG;AAAA;AAAA,CAAA,EAGjDJ,EAAA,EAAAF,EAAa,EAAK,iBAWb,IAAAO,EAAe,MAAA,UAAU,aAC3B,aAAe,CAAA,MAAO,EACtB,CAAA,EAAA,eAAgBC,EAAG,CACnB,OAAAC,EAAM,MACLC,EAAM,EAAC,yDAAA,CACN,MAAOF,CAAG,CAAA,CAAA,EAGL,OAGLD,IACHL,EAAA,EAAAF,EAAa,EAAI,EACFO,EAAO,YACf,QAASI,GAAUA,EAAM,KAAI,CAAA,GAErCJ,EAAS,WAETE,EAAM,MAAMC,EAAM,EAAE,6CAA6C,CAAA"}