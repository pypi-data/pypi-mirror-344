import{s as S,l as d,i as I,d as N,p as R,j as v,q as U,n as V}from"../chunks/25wJL1Su.js";import{S as q,i as T,t as f,a as p,c as O,g as h,b as $,d as y,m as W,e as B}from"../chunks/CPwzRg77.js";import{g as P}from"../chunks/CJqw8RZz.js";import{c as C,g as D}from"../chunks/5WZRXWl_.js";import{T as J}from"../chunks/AN4xWZCo.js";import{b as k,t as M}from"../chunks/Cd_5PT-V.js";import{e as Q,c as j}from"../chunks/ZGe3o3eu.js";import{t as g}from"../chunks/8ef81IiG.js";function E(i){var c;let r=(c=i[2])==null?void 0:c.content,n,e,o=b(i);return{c(){o.c(),n=d()},l(s){o.l(s),n=d()},m(s,t){o.m(s,t),I(s,n,t),e=!0},p(s,t){var l;t&4&&S(r,r=(l=s[2])==null?void 0:l.content)?(h(),p(o,1,1,V),O(),o=b(s),o.c(),f(o,1),o.m(n.parentNode,n)):o.p(s,t)},i(s){e||(f(o),e=!0)},o(s){p(o),e=!1},d(s){s&&N(n),o.d(s)}}}function b(i){var e,o,c,s;let r,n;return r=new J({props:{id:((e=i[2])==null?void 0:e.id)??"",name:((o=i[2])==null?void 0:o.name)??"",meta:((c=i[2])==null?void 0:c.meta)??{description:""},content:((s=i[2])==null?void 0:s.content)??"",access_control:null,clone:i[1],onSave:i[5]}}),{c(){$(r.$$.fragment)},l(t){y(r.$$.fragment,t)},m(t,l){W(r,t,l),n=!0},p(t,l){var a,m,w,_;const u={};l&4&&(u.id=((a=t[2])==null?void 0:a.id)??""),l&4&&(u.name=((m=t[2])==null?void 0:m.name)??""),l&4&&(u.meta=((w=t[2])==null?void 0:w.meta)??{description:""}),l&4&&(u.content=((_=t[2])==null?void 0:_.content)??""),l&2&&(u.clone=t[1]),r.$set(u)},i(t){n||(f(r.$$.fragment,t),n=!0)},o(t){p(r.$$.fragment,t),n=!1},d(t){B(r,t)}}}function F(i){let r,n,e=i[0]&&E(i);return{c(){e&&e.c(),r=d()},l(o){e&&e.l(o),r=d()},m(o,c){e&&e.m(o,c),I(o,r,c),n=!0},p(o,[c]){o[0]?e?(e.p(o,c),c&1&&f(e,1)):(e=E(o),e.c(),f(e,1),e.m(r.parentNode,r)):e&&(h(),p(e,1,1,()=>{e=null}),O())},i(o){n||(f(e),n=!0)},o(o){p(e),n=!1},d(o){o&&N(r),e&&e.d(o)}}}function H(i,r,n){let e;const o=R("i18n");v(i,o,a=>n(6,e=a));let c=!1,s=!1,t=null;const l=async a=>{const m=Q(a.content);if(j((m==null?void 0:m.required_open_webui_version)??"0.0.0",k)){g.error(e.t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:k,REQUIRED_VERSION:(m==null?void 0:m.required_open_webui_version)??"0.0.0"}));return}await C(localStorage.token,{id:a.id,name:a.name,meta:a.meta,content:a.content,access_control:a.access_control}).catch(_=>(g.error(`${_}`),null))&&(g.success(e.t("Tool created successfully")),M.set(await D(localStorage.token)),await P("/workspace/tools"))};return U(()=>{window.addEventListener("message",async a=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(a.origin)&&n(2,t=JSON.parse(a.data))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.tool&&(n(2,t=JSON.parse(sessionStorage.tool)),sessionStorage.removeItem("tool"),n(1,s=!0)),n(0,c=!0)}),[c,s,t,o,l,a=>{l(a)}]}class x extends q{constructor(r){super(),T(this,r,H,F,S,{})}}export{x as component};
//# sourceMappingURL=33.C0DpIq-O.js.map
