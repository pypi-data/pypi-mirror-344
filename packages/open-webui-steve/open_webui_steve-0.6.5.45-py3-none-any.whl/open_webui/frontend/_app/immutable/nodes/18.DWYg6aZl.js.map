{"version":3,"file":"18.DWYg6aZl.js","sources":["../../../../../../src/lib/components/playground/Chat/Message.svelte","../../../../../../src/lib/components/playground/Chat/Messages.svelte","../../../../../../src/lib/components/common/Sidebar.svelte","../../../../../../src/lib/components/icons/ArrowRight.svelte","../../../../../../src/lib/components/playground/Chat.svelte"],"sourcesContent":["<script lang=\"ts\">\r\n\timport { onMount, getContext } from 'svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let message;\r\n\texport let idx;\r\n\r\n\texport let onDelete;\r\n\r\n\tlet textAreaElement: HTMLTextAreaElement;\r\n\r\n\tonMount(() => {\r\n\t\ttextAreaElement.style.height = '';\r\n\t\ttextAreaElement.style.height = textAreaElement.scrollHeight + 'px';\r\n\t});\r\n</script>\r\n\r\n<div class=\"flex gap-2 group\">\r\n\t<div class=\"flex items-start pt-1\">\r\n\t\t<div\r\n\t\t\tclass=\"px-2 py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition\"\r\n\t\t>\r\n\t\t\t{$i18n.t(message.role)}\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"flex-1\">\r\n\t\t<!-- $i18n.t('a user') -->\r\n\t\t<!-- $i18n.t('an assistant') -->\r\n\t\t<textarea\r\n\t\t\tid=\"{message.role}-{idx}-textarea\"\r\n\t\t\tbind:this={textAreaElement}\r\n\t\t\tclass=\"w-full bg-transparent outline-hidden rounded-lg p-2 text-sm resize-none overflow-hidden\"\r\n\t\t\tplaceholder={$i18n.t(`Enter {{role}} message here`, {\r\n\t\t\t\trole: message.role === 'user' ? $i18n.t('a user') : $i18n.t('an assistant')\r\n\t\t\t})}\r\n\t\t\trows=\"1\"\r\n\t\t\ton:input={(e) => {\r\n\t\t\t\ttextAreaElement.style.height = '';\r\n\t\t\t\ttextAreaElement.style.height = textAreaElement.scrollHeight + 'px';\r\n\t\t\t}}\r\n\t\t\ton:focus={(e) => {\r\n\t\t\t\ttextAreaElement.style.height = '';\r\n\t\t\t\ttextAreaElement.style.height = textAreaElement.scrollHeight + 'px';\r\n\r\n\t\t\t\t// e.target.style.height = Math.min(e.target.scrollHeight, 200) + 'px';\r\n\t\t\t}}\r\n\t\t\tbind:value={message.content}\r\n\t\t/>\r\n\t</div>\r\n\r\n\t<div class=\" pt-1\">\r\n\t\t<button\r\n\t\t\tclass=\" group-hover:text-gray-500 dark:text-gray-900 dark:hover:text-gray-300 transition\"\r\n\t\t\ton:click={() => {\r\n\t\t\t\tonDelete();\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\tstroke-width=\"2\"\r\n\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\tstroke-linecap=\"round\"\r\n\t\t\t\t\tstroke-linejoin=\"round\"\r\n\t\t\t\t\td=\"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { onMount, getContext } from 'svelte';\r\n\timport Message from './Message.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\texport let messages = [];\r\n</script>\r\n\r\n<div class=\"py-3 space-y-3\">\r\n\t{#each messages as message, idx}\r\n\t\t<Message\r\n\t\t\t{message}\r\n\t\t\t{idx}\r\n\t\t\tonDelete={() => {\r\n\t\t\t\tmessages = messages.filter((message, messageIdx) => messageIdx !== idx);\r\n\t\t\t}}\r\n\t\t/>\r\n\t{/each}\r\n</div>\r\n","<script lang=\"ts\">\r\n\timport { fade, slide } from 'svelte/transition';\r\n\r\n\texport let show = false;\r\n\texport let side = 'right';\r\n\texport let width = '200px';\r\n\r\n\texport let className = '';\r\n\texport let duration = 100;\r\n</script>\r\n\r\n{#if show}\r\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\r\n\t<div\r\n\t\tclass=\"absolute z-20 top-0 right-0 left-0 bottom-0 bg-white/20 dark:bg-black/5 w-full min-h-full h-full flex justify-center overflow-hidden overscroll-contain\"\r\n\t\ton:mousedown={() => {\r\n\t\t\tshow = false;\r\n\t\t}}\r\n\t\ttransition:fade={{ duration: duration }}\r\n\t/>\r\n\r\n\t<div\r\n\t\tclass=\"absolute z-30 shadow-xl {side === 'right' ? 'right-0' : 'left-0'} top-0 bottom-0\"\r\n\t\ttransition:slide={{ duration: duration, axis: side === 'right' ? 'x' : 'y' }}\r\n\t>\r\n\t\t<div class=\"{className} h-full\" style=\"width: {show ? width : '0px'}\">\r\n\t\t\t<slot />\r\n\t\t</div>\r\n\t</div>\r\n{/if}\r\n","<script lang=\"ts\">\r\n\texport let className = 'size-4';\r\n\texport let strokeWidth = '1.5';\r\n</script>\r\n\r\n<svg\r\n\txmlns=\"http://www.w3.org/2000/svg\"\r\n\tfill=\"none\"\r\n\tviewBox=\"0 0 24 24\"\r\n\tstroke-width={strokeWidth}\r\n\tstroke=\"currentColor\"\r\n\tclass={className}\r\n>\r\n\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3\" />\r\n</svg>\r\n","<script lang=\"ts\">\r\n\timport { toast } from 'svelte-sonner';\r\n\r\n\timport { goto } from '$app/navigation';\r\n\timport { onMount, tick, getContext } from 'svelte';\r\n\r\n\timport {\r\n\t\tOLLAMA_API_BASE_URL,\r\n\t\tOPENAI_API_BASE_URL,\r\n\t\tWEBUI_API_BASE_URL,\r\n\t\tWEBUI_BASE_URL\r\n\t} from '$lib/constants';\r\n\timport { WEBUI_NAME, config, user, models, settings } from '$lib/stores';\r\n\r\n\timport { chatCompletion, generateOpenAIChatCompletion } from '$lib/apis/openai';\r\n\r\n\timport { splitStream } from '$lib/utils';\r\n\timport Collapsible from '../common/Collapsible.svelte';\r\n\r\n\timport Messages from '$lib/components/playground/Chat/Messages.svelte';\r\n\timport ChevronUp from '../icons/ChevronUp.svelte';\r\n\timport ChevronDown from '../icons/ChevronDown.svelte';\r\n\timport Pencil from '../icons/Pencil.svelte';\r\n\timport Cog6 from '../icons/Cog6.svelte';\r\n\timport Sidebar from '../common/Sidebar.svelte';\r\n\timport ArrowRight from '../icons/ArrowRight.svelte';\r\n\r\n\tconst i18n = getContext('i18n');\r\n\r\n\tlet loaded = false;\r\n\r\n\tlet selectedModelId = '';\r\n\tlet loading = false;\r\n\tlet stopResponseFlag = false;\r\n\r\n\tlet systemTextareaElement: HTMLTextAreaElement;\r\n\tlet messagesContainerElement: HTMLDivElement;\r\n\r\n\tlet showSystem = false;\r\n\tlet showSettings = false;\r\n\r\n\tlet system = '';\r\n\r\n\tlet role = 'user';\r\n\tlet message = '';\r\n\r\n\tlet messages = [];\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tconst element = messagesContainerElement;\r\n\r\n\t\tif (element) {\r\n\t\t\telement.scrollTop = element?.scrollHeight;\r\n\t\t}\r\n\t};\r\n\r\n\tconst stopResponse = () => {\r\n\t\tstopResponseFlag = true;\r\n\t\tconsole.log('stopResponse');\r\n\t};\r\n\r\n\tconst resizeSystemTextarea = async () => {\r\n\t\tawait tick();\r\n\t\tif (systemTextareaElement) {\r\n\t\t\tsystemTextareaElement.style.height = '';\r\n\t\t\tsystemTextareaElement.style.height = Math.min(systemTextareaElement.scrollHeight, 555) + 'px';\r\n\t\t}\r\n\t};\r\n\r\n\t$: if (showSystem) {\r\n\t\tresizeSystemTextarea();\r\n\t}\r\n\r\n\tconst chatCompletionHandler = async () => {\r\n\t\tif (selectedModelId === '') {\r\n\t\t\ttoast.error($i18n.t('Please select a model.'));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst model = $models.find((model) => model.id === selectedModelId);\r\n\t\tif (!model) {\r\n\t\t\tselectedModelId = '';\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst [res, controller] = await chatCompletion(\r\n\t\t\tlocalStorage.token,\r\n\t\t\t{\r\n\t\t\t\tmodel: model.id,\r\n\t\t\t\tstream: true,\r\n\t\t\t\tmessages: [\r\n\t\t\t\t\tsystem\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\trole: 'system',\r\n\t\t\t\t\t\t\t\tcontent: system\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t...messages\r\n\t\t\t\t].filter((message) => message)\r\n\t\t\t},\r\n\t\t\t`${WEBUI_BASE_URL}/api`\r\n\t\t);\r\n\r\n\t\tlet responseMessage;\r\n\t\tif (messages.at(-1)?.role === 'assistant') {\r\n\t\t\tresponseMessage = messages.at(-1);\r\n\t\t} else {\r\n\t\t\tresponseMessage = {\r\n\t\t\t\trole: 'assistant',\r\n\t\t\t\tcontent: ''\r\n\t\t\t};\r\n\t\t\tmessages.push(responseMessage);\r\n\t\t\tmessages = messages;\r\n\t\t}\r\n\r\n\t\tawait tick();\r\n\t\tconst textareaElement = document.getElementById(`assistant-${messages.length - 1}-textarea`);\r\n\r\n\t\tif (res && res.ok) {\r\n\t\t\tconst reader = res.body\r\n\t\t\t\t.pipeThrough(new TextDecoderStream())\r\n\t\t\t\t.pipeThrough(splitStream('\\n'))\r\n\t\t\t\t.getReader();\r\n\r\n\t\t\twhile (true) {\r\n\t\t\t\tconst { value, done } = await reader.read();\r\n\t\t\t\tif (done || stopResponseFlag) {\r\n\t\t\t\t\tif (stopResponseFlag) {\r\n\t\t\t\t\t\tcontroller.abort('User: Stop Response');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet lines = value.split('\\n');\r\n\r\n\t\t\t\t\tfor (const line of lines) {\r\n\t\t\t\t\t\tif (line !== '') {\r\n\t\t\t\t\t\t\tconsole.log(line);\r\n\t\t\t\t\t\t\tif (line === 'data: [DONE]') {\r\n\t\t\t\t\t\t\t\t// responseMessage.done = true;\r\n\t\t\t\t\t\t\t\tmessages = messages;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet data = JSON.parse(line.replace(/^data: /, ''));\r\n\t\t\t\t\t\t\t\tconsole.log(data);\r\n\r\n\t\t\t\t\t\t\t\tif (responseMessage.content == '' && data.choices[0].delta.content == '\\n') {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\ttextareaElement.style.height = textareaElement.scrollHeight + 'px';\r\n\r\n\t\t\t\t\t\t\t\t\tresponseMessage.content += data.choices[0].delta.content ?? '';\r\n\t\t\t\t\t\t\t\t\tmessages = messages;\r\n\r\n\t\t\t\t\t\t\t\t\ttextareaElement.style.height = textareaElement.scrollHeight + 'px';\r\n\r\n\t\t\t\t\t\t\t\t\tawait tick();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscrollToBottom();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst addHandler = async () => {\r\n\t\tif (message) {\r\n\t\t\tmessages.push({\r\n\t\t\t\trole: role,\r\n\t\t\t\tcontent: message\r\n\t\t\t});\r\n\t\t\tmessages = messages;\r\n\t\t\tmessage = '';\r\n\t\t\tawait tick();\r\n\t\t\tscrollToBottom();\r\n\t\t}\r\n\t};\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tif (selectedModelId) {\r\n\t\t\tawait addHandler();\r\n\r\n\t\t\tloading = true;\r\n\t\t\tawait chatCompletionHandler();\r\n\r\n\t\t\tloading = false;\r\n\t\t\tstopResponseFlag = false;\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(async () => {\r\n\t\tif ($user?.role !== 'admin') {\r\n\t\t\tawait goto('/');\r\n\t\t}\r\n\r\n\t\tif ($settings?.models) {\r\n\t\t\tselectedModelId = $settings?.models[0];\r\n\t\t} else if ($config?.default_models) {\r\n\t\t\tselectedModelId = $config?.default_models.split(',')[0];\r\n\t\t} else {\r\n\t\t\tselectedModelId = '';\r\n\t\t}\r\n\t\tloaded = true;\r\n\t});\r\n</script>\r\n\r\n<div class=\" flex flex-col justify-between w-full overflow-y-auto h-full\">\r\n\t<div class=\"mx-auto w-full md:px-0 h-full relative\">\r\n\t\t<Sidebar bind:show={showSettings} className=\" bg-white dark:bg-gray-900\" width=\"300px\">\r\n\t\t\t<div class=\"flex flex-col px-5 py-3 text-sm\">\r\n\t\t\t\t<div class=\"flex justify-between items-center mb-2\">\r\n\t\t\t\t\t<div class=\" font-medium text-base\">Settings</div>\r\n\r\n\t\t\t\t\t<div class=\" translate-x-1.5\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg\"\r\n\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\tshowSettings = !showSettings;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ArrowRight className=\"size-3\" strokeWidth=\"2.5\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"mt-1\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div class=\" text-xs font-medium mb-1\">Model</div>\r\n\r\n\t\t\t\t\t\t<div class=\"w-full\">\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tclass=\"w-full bg-transparent border border-gray-100 dark:border-gray-850 rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden\"\r\n\t\t\t\t\t\t\t\tbind:value={selectedModelId}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#each $models as model}\r\n\t\t\t\t\t\t\t\t\t<option value={model.id} class=\"bg-gray-50 dark:bg-gray-700\">{model.name}</option>\r\n\t\t\t\t\t\t\t\t{/each}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Sidebar>\r\n\r\n\t\t<div class=\" flex flex-col h-full px-3.5\">\r\n\t\t\t<div class=\"flex w-full items-start gap-1.5\">\r\n\t\t\t\t<Collapsible\r\n\t\t\t\t\tclassName=\"w-full flex-1\"\r\n\t\t\t\t\tbind:open={showSystem}\r\n\t\t\t\t\tbuttonClassName=\"w-full rounded-lg text-sm border border-gray-100 dark:border-gray-850 w-full py-1 px-1.5\"\r\n\t\t\t\t\tgrow={true}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"flex gap-2 justify-between items-center\">\r\n\t\t\t\t\t\t<div class=\" shrink-0 font-medium ml-1.5\">\r\n\t\t\t\t\t\t\t{$i18n.t('System Instructions')}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{#if !showSystem}\r\n\t\t\t\t\t\t\t<div class=\" flex-1 text-gray-500 line-clamp-1\">\r\n\t\t\t\t\t\t\t\t{system}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/if}\r\n\r\n\t\t\t\t\t\t<div class=\"shrink-0\">\r\n\t\t\t\t\t\t\t<button class=\"p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg\">\r\n\t\t\t\t\t\t\t\t{#if showSystem}\r\n\t\t\t\t\t\t\t\t\t<ChevronUp className=\"size-3.5\" />\r\n\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t<Pencil className=\"size-3.5\" />\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div slot=\"content\">\r\n\t\t\t\t\t\t<div class=\"pt-1 px-1.5\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tbind:this={systemTextareaElement}\r\n\t\t\t\t\t\t\t\tclass=\"w-full h-full bg-transparent resize-none outline-hidden text-sm\"\r\n\t\t\t\t\t\t\t\tbind:value={system}\r\n\t\t\t\t\t\t\t\tplaceholder={$i18n.t(\"You're a helpful assistant.\")}\r\n\t\t\t\t\t\t\t\ton:input={() => {\r\n\t\t\t\t\t\t\t\t\tresizeSystemTextarea();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Collapsible>\r\n\r\n\t\t\t\t<div class=\"translate-y-1\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg\"\r\n\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\tshowSettings = !showSettings;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Cog6 />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclass=\" pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0\"\r\n\t\t\t\tid=\"messages-container\"\r\n\t\t\t\tbind:this={messagesContainerElement}\r\n\t\t\t>\r\n\t\t\t\t<div class=\" h-full w-full flex flex-col\">\r\n\t\t\t\t\t<div class=\"flex-1 p-1\">\r\n\t\t\t\t\t\t<Messages bind:messages />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"pb-3\">\r\n\t\t\t\t<div class=\"text-xs font-medium text-gray-500 px-2 py-1\">\r\n\t\t\t\t\t{selectedModelId}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"border border-gray-100 dark:border-gray-850 w-full px-3 py-2.5 rounded-xl\">\r\n\t\t\t\t\t<div class=\"py-0.5\">\r\n\t\t\t\t\t\t<!-- $i18n.t('a user') -->\r\n\t\t\t\t\t\t<!-- $i18n.t('an assistant') -->\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tbind:value={message}\r\n\t\t\t\t\t\t\tclass=\" w-full h-full bg-transparent resize-none outline-hidden text-sm\"\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t(`Enter {{role}} message here`, {\r\n\t\t\t\t\t\t\t\trole: role === 'user' ? $i18n.t('a user') : $i18n.t('an assistant')\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\ton:input={(e) => {\r\n\t\t\t\t\t\t\t\te.target.style.height = '';\r\n\t\t\t\t\t\t\t\te.target.style.height = Math.min(e.target.scrollHeight, 150) + 'px';\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ton:focus={(e) => {\r\n\t\t\t\t\t\t\t\te.target.style.height = '';\r\n\t\t\t\t\t\t\t\te.target.style.height = Math.min(e.target.scrollHeight, 150) + 'px';\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\trows=\"2\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"flex justify-between\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg\"\r\n\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\trole = role === 'user' ? 'assistant' : 'user';\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{#if role === 'user'}\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('User')}\r\n\t\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Assistant')}\r\n\t\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{#if !loading}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tdisabled={message === ''}\r\n\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium disabled:bg-gray-50 dark:disabled:hover:bg-gray-850 disabled:cursor-not-allowed bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\taddHandler();\r\n\t\t\t\t\t\t\t\t\t\trole = role === 'user' ? 'assistant' : 'user';\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Add')}\r\n\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\"px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-lg\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tsubmitHandler();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Run')}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{:else}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclass=\"px-3 py-1.5 text-sm font-medium bg-gray-300 text-black transition rounded-lg\"\r\n\t\t\t\t\t\t\t\t\ton:click={() => {\r\n\t\t\t\t\t\t\t\t\t\tstopResponse();\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t{/if}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n"],"names":["t0_value","ctx","attr","textarea","textarea_placeholder_value","insert_hydration","target","div4","anchor","append_hydration","div1","div0","div2","set_input_value","div3","button","dirty","set_data","t0","i18n","getContext","message","$$props","idx","onDelete","textAreaElement","onMount","$$invalidate","$$value","e","i","div","each_blocks","messages","messageIdx","div2_class_value","current","div0_transition","create_bidirectional_transition","fade","create_if_block","show","side","width","className","duration","svg","path","strokeWidth","t_value","option","option_value_value","add_render_callback","select","div7","div6","div5","create_if_block_3","t","button0","button0_disabled_value","button1","t2","t2_value","create_if_block_1","div14","div13","div12","div11","div10","div9","div8","selectedModelId","loading","stopResponseFlag","systemTextareaElement","messagesContainerElement","showSystem","showSettings","system","role","scrollToBottom","element","stopResponse","resizeSystemTextarea","tick","chatCompletionHandler","toast","$i18n","model","$models","res","controller","chatCompletion","WEBUI_BASE_URL","responseMessage","_a","textareaElement","reader","splitStream","value","done","lines","line","data","error","addHandler","submitHandler","$user","goto","$settings","$config","select_value"],"mappings":"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"}