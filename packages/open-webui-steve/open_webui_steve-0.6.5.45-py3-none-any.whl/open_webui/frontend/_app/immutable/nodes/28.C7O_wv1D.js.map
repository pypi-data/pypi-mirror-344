{"version":3,"file":"28.C7O_wv1D.js","sources":["../../../../../../src/routes/(app)/workspace/models/edit/+page.svelte"],"sourcesContent":["<script>\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { goto } from '$app/navigation';\r\n\r\n\timport { onMount, getContext } from 'svelte';\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport { page } from '$app/stores';\r\n\timport { config, models, settings } from '$lib/stores';\r\n\r\n\timport { getModelById, updateModelById } from '$lib/apis/models';\r\n\r\n\timport { getModels } from '$lib/apis';\r\n\timport ModelEditor from '$lib/components/workspace/Models/ModelEditor.svelte';\r\n\r\n\tlet model = null;\r\n\r\n\tonMount(async () => {\r\n\t\tconst _id = $page.url.searchParams.get('id');\r\n\t\tif (_id) {\r\n\t\t\tmodel = await getModelById(localStorage.token, _id).catch((e) => {\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\r\n\t\t\tif (!model) {\r\n\t\t\t\tgoto('/workspace/models');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tgoto('/workspace/models');\r\n\t\t}\r\n\t});\r\n\r\n\tconst onSubmit = async (modelInfo) => {\r\n\t\tconst res = await updateModelById(localStorage.token, modelInfo.id, modelInfo);\r\n\r\n\t\tif (res) {\r\n\t\t\tawait models.set(\r\n\t\t\t\tawait getModels(\r\n\t\t\t\t\tlocalStorage.token,\r\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\ttoast.success($i18n.t('Model updated successfully'));\r\n\t\t\tawait goto('/workspace/models');\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n{#if model}\r\n\t<ModelEditor edit={true} {model} {onSubmit} />\r\n{/if}\r\n"],"names":["ctx","create_if_block","i18n","getContext","model","onMount","_id","$page","getModelById","e","goto","modelInfo","updateModelById","models","getModels","_a","$config","$settings","toast","$i18n"],"mappings":"0iBAiDoB,6PADfA,EAAK,CAAA,GAAAC,EAAAD,CAAA,8FAALA,EAAK,CAAA,oQA3CHE,EAAOC,EAAW,MAAM,qBAU1B,IAAAC,EAAQ,KAEZ,OAAAC,EAAO,SAAA,OACAC,EAAMC,EAAM,IAAI,aAAa,IAAI,IAAI,EACvCD,OACHF,EAAK,MAASI,EAAa,aAAa,MAAOF,CAAG,EAAE,MAAOG,GACnD,OAGHL,GACJM,EAAK,mBAAmB,GAGzBA,EAAK,mBAAmB,eAIFC,GAAS,OACvB,MAASC,EAAgB,aAAa,MAAOD,EAAU,GAAIA,CAAS,IAGtE,MAAAE,EAAO,IAAG,MACTC,EACL,aAAa,QACbC,EAAAC,GAAA,YAAAA,EAAS,WAAT,YAAAD,EAAmB,8BAA8BE,GAAA,YAAAA,EAAW,oBAAqB,KAAI,CAAA,EAGvFC,EAAM,QAAQC,EAAM,EAAE,4BAA4B,CAAA,EAC5C,MAAAT,EAAK,mBAAmB"}