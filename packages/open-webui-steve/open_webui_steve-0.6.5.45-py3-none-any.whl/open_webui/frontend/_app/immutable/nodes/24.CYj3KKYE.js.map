{"version":3,"file":"24.CYj3KKYE.js","sources":["../../../../../../src/lib/components/workspace/Knowledge/CreateKnowledgeBase.svelte"],"sourcesContent":["<script>\r\n\timport { goto } from '$app/navigation';\r\n\timport { getContext } from 'svelte';\r\n\tconst i18n = getContext('i18n');\r\n\r\n\timport { createNewKnowledge, getKnowledgeBases } from '$lib/apis/knowledge';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { knowledge, user } from '$lib/stores';\r\n\timport AccessControl from '../common/AccessControl.svelte';\r\n\r\n\tlet loading = false;\r\n\r\n\tlet name = '';\r\n\tlet description = '';\r\n\tlet accessControl = {};\r\n\r\n\tconst submitHandler = async () => {\r\n\t\tloading = true;\r\n\r\n\t\tif (name.trim() === '' || description.trim() === '') {\r\n\t\t\ttoast.error($i18n.t('Please fill in all fields.'));\r\n\t\t\tname = '';\r\n\t\t\tdescription = '';\r\n\t\t\tloading = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst res = await createNewKnowledge(\r\n\t\t\tlocalStorage.token,\r\n\t\t\tname,\r\n\t\t\tdescription,\r\n\t\t\taccessControl\r\n\t\t).catch((e) => {\r\n\t\t\ttoast.error(`${e}`);\r\n\t\t});\r\n\r\n\t\tif (res) {\r\n\t\t\ttoast.success($i18n.t('Knowledge created successfully.'));\r\n\t\t\tknowledge.set(await getKnowledgeBases(localStorage.token));\r\n\t\t\tgoto(`/workspace/knowledge/${res.id}`);\r\n\t\t}\r\n\r\n\t\tloading = false;\r\n\t};\r\n</script>\r\n\r\n<div class=\"w-full max-h-full\">\r\n\t<button\r\n\t\tclass=\"flex space-x-1\"\r\n\t\ton:click={() => {\r\n\t\t\tgoto('/workspace/knowledge');\r\n\t\t}}\r\n\t>\r\n\t\t<div class=\" self-center\">\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\tclass=\"w-4 h-4\"\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\tfill-rule=\"evenodd\"\r\n\t\t\t\t\td=\"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z\"\r\n\t\t\t\t\tclip-rule=\"evenodd\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t\t<div class=\" self-center font-medium text-sm\">{$i18n.t('Back')}</div>\r\n\t</button>\r\n\r\n\t<form\r\n\t\tclass=\"flex flex-col max-w-lg mx-auto mt-10 mb-10\"\r\n\t\ton:submit|preventDefault={() => {\r\n\t\t\tsubmitHandler();\r\n\t\t}}\r\n\t>\r\n\t\t<div class=\" w-full flex flex-col justify-center\">\r\n\t\t\t<div class=\" text-2xl font-medium font-primary mb-2.5\">\r\n\t\t\t\t{$i18n.t('Create a knowledge base')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"w-full flex flex-col gap-2.5\">\r\n\t\t\t\t<div class=\"w-full\">\r\n\t\t\t\t\t<div class=\" text-sm mb-2\">{$i18n.t('What are you working on?')}</div>\r\n\r\n\t\t\t\t\t<div class=\"w-full mt-1\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclass=\"w-full rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tbind:value={name}\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Name your knowledge base')}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"text-sm mb-2\">{$i18n.t('What are you trying to achieve?')}</div>\r\n\r\n\t\t\t\t\t<div class=\" w-full mt-1\">\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tclass=\"w-full resize-none rounded-lg py-2 px-4 text-sm bg-gray-50 dark:text-gray-300 dark:bg-gray-850 outline-hidden\"\r\n\t\t\t\t\t\t\trows=\"4\"\r\n\t\t\t\t\t\t\tbind:value={description}\r\n\t\t\t\t\t\t\tplaceholder={$i18n.t('Describe your knowledge base and objectives')}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"mt-2\">\r\n\t\t\t<div class=\"px-3 py-2 bg-gray-50 dark:bg-gray-950 rounded-lg\">\r\n\t\t\t\t<AccessControl\r\n\t\t\t\t\tbind:accessControl\r\n\t\t\t\t\taccessRoles={['read', 'write']}\r\n\t\t\t\t\tallowPublic={$user?.permissions?.sharing?.public_knowledge || $user?.role === 'admin'}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"flex justify-end mt-2\">\r\n\t\t\t<div>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclass=\" text-sm px-4 py-2 transition rounded-lg {loading\r\n\t\t\t\t\t\t? ' cursor-not-allowed bg-gray-100 dark:bg-gray-800'\r\n\t\t\t\t\t\t: ' bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800'} flex\"\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Create Knowledge')}</div>\r\n\r\n\t\t\t\t\t{#if loading}\r\n\t\t\t\t\t\t<div class=\"ml-1.5 self-center\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t><style>\r\n\t\t\t\t\t\t\t\t\t.spinner_ajPY {\r\n\t\t\t\t\t\t\t\t\t\ttransform-origin: center;\r\n\t\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\r\n\t\t\t\t\t\t\t\t\t\t100% {\r\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</style><path\r\n\t\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\r\n\t\t\t\t\t\t\t\t\topacity=\".25\"\r\n\t\t\t\t\t\t\t\t/><path\r\n\t\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\r\n\t\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\r\n\t\t\t\t\t\t\t\t/></svg\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</form>\r\n</div>\r\n"],"names":["insert_hydration","target","div","anchor","ctx","_c","_b","_a","_d","create_if_block","div16","append_hydration","button0","div0","div1","form","div10","div2","div9","div5","div3","div4","input","div8","div6","div7","textarea","div12","div11","div15","div14","button1","div13","set_data","t1","t1_value","t3","t3_value","t5","t5_value","t8","t8_value","t12","t12_value","i18n","getContext","loading","name","description","accessControl","submitHandler","$$invalidate","toast","$i18n","res","createNewKnowledge","e","knowledge","getKnowledgeBases","goto"],"mappings":";;;;;;;;;sgBAsIMA,GAwBMC,EAAAC,EAAAC,CAAA,mYA3FqCC,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,eAW1DA,EAAK,CAAA,EAAC,EAAE,yBAAyB,EAAA,gBAKLA,EAAK,CAAA,EAAC,EAAE,0BAA0B,EAAA,yBAcnCA,EAAK,CAAA,EAAC,EAAE,iCAAiC,EAAA,yCAkC7BA,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,oDAfnD,YAAA,CAAA,OAAQ,OAAO,gBAChBC,IAAAC,IAAAC,GAAAH,EAAK,CAAA,IAAL,YAAAG,GAAO,cAAP,YAAAD,GAAoB,UAApB,YAAAD,GAA6B,qBAAoBG,GAAAJ,EAAK,CAAA,IAAL,YAAAI,GAAO,QAAS,iHAgBzEJ,EAAO,CAAA,GAAAK,GAAA,uiEA3CGL,EAAK,CAAA,EAAC,EAAE,0BAA0B,CAAA,+PAclCA,EAAK,CAAA,EAAC,EAAE,6CAA6C,CAAA,gUAqBnBA,EAAO,CAAA,EACrD,mDACA,yEAAuE,OAAA,kCAEhEA,EAAO,CAAA,0IAnFtBJ,GAsHMC,EAAAS,EAAAP,CAAA,EArHLQ,EAqBSD,EAAAE,CAAA,EAfRD,EAaMC,EAAAC,CAAA,SACNF,EAAqEC,EAAAE,CAAA,gBAGtEH,EA6FOD,EAAAK,CAAA,EAvFNJ,EAkCMI,EAAAC,CAAA,EAjCLL,EAEMK,EAAAC,CAAA,iBAENN,EA4BMK,EAAAE,CAAA,EA3BLP,EAYMO,EAAAC,CAAA,EAXLR,EAAsEQ,EAAAC,CAAA,kBAEtET,EAQMQ,EAAAE,CAAA,EAPLV,EAMEU,EAAAC,CAAA,OAHWlB,EAAI,CAAA,CAAA,UAOnBO,EAYMO,EAAAK,CAAA,EAXLZ,EAA4EY,EAAAC,CAAA,kBAE5Eb,EAQMY,EAAAE,CAAA,EAPLd,EAMEc,EAAAC,CAAA,OAHWtB,EAAW,CAAA,CAAA,UAS5BO,EAQMI,EAAAY,CAAA,EAPLhB,EAMMgB,EAAAC,CAAA,uBAGPjB,EAwCMI,EAAAc,CAAA,EAvCLlB,EAsCMkB,EAAAC,CAAA,EArCLnB,EAoCSmB,EAAAC,CAAA,EA7BRpB,EAAyEoB,EAAAC,CAAA,mLAhE7B5B,EAAK,CAAA,EAAC,EAAE,MAAM,EAAA,KAAA6B,EAAAC,EAAAC,CAAA,qBAW1D/B,EAAK,CAAA,EAAC,EAAE,yBAAyB,EAAA,KAAA6B,EAAAG,EAAAC,CAAA,qBAKLjC,EAAK,CAAA,EAAC,EAAE,0BAA0B,EAAA,KAAA6B,EAAAK,GAAAC,CAAA,sBAO/CnC,EAAK,CAAA,EAAC,EAAE,0BAA0B,0CADnCA,EAAI,CAAA,QAAJA,EAAI,CAAA,CAAA,qBAQSA,EAAK,CAAA,EAAC,EAAE,iCAAiC,EAAA,KAAA6B,EAAAO,GAAAC,CAAA,sBAOrDrC,EAAK,CAAA,EAAC,EAAE,6CAA6C,qCADtDA,EAAW,CAAA,CAAA,oCAcZC,GAAAC,GAAAC,EAAAH,EAAK,CAAA,IAAL,YAAAG,EAAO,cAAP,YAAAD,EAAoB,UAApB,YAAAD,EAA6B,qBAAoBG,EAAAJ,EAAK,CAAA,IAAL,YAAAI,EAAO,QAAS,2FAcvCJ,EAAK,CAAA,EAAC,EAAE,kBAAkB,EAAA,KAAA6B,EAAAS,GAAAC,CAAA,EAE5DvC,EAAO,CAAA,kHARqCA,EAAO,CAAA,EACrD,mDACA,yEAAuE,kDAEhEA,EAAO,CAAA,wKA9HfwC,EAAOC,GAAW,MAAM,sBAO1B,IAAAC,EAAU,GAEVC,EAAO,GACPC,EAAc,GACdC,EAAa,CAAA,QAEXC,EAAa,SAAA,IAClBC,EAAA,EAAAL,EAAU,EAAI,EAEVC,EAAK,SAAW,IAAMC,EAAY,KAAI,IAAO,GAAE,CAClDI,GAAM,MAAMC,EAAM,EAAE,4BAA4B,CAAA,EAChDF,EAAA,EAAAJ,EAAO,EAAE,EACTI,EAAA,EAAAH,EAAc,EAAE,EAChBG,EAAA,EAAAL,EAAU,EAAK,SAIV,MAAAQ,EAAY,MAAAC,GACjB,aAAa,MACbR,EACAC,EACAC,CAAa,EACZ,MAAOO,GAAC,CACTJ,GAAM,MAAK,GAAII,CAAC,EAAA,IAGbF,IACHF,GAAM,QAAQC,EAAM,EAAE,iCAAiC,CAAA,EACvDI,GAAU,IAAG,MAAOC,GAAkB,aAAa,KAAK,CAAA,EACxDC,GAAI,wBAAyBL,EAAI,EAAE,EAAA,GAGpCH,EAAA,EAAAL,EAAU,EAAK,UAQda,GAAK,sBAAsB,gBAuCXZ,EAAI,KAAA,0BAcJC,EAAW,KAAA,0EA9B3BE"}