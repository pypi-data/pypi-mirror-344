(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2828],{85082:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/organization",function(){return i(5417)}])},77213:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var r=i(24246),n=i(91922),a=i(88038),s=i.n(a),o=i(86677);i(27378);var l=i(25980),d=i(90867),c=i(77830),u=()=>{let e=(0,o.useRouter)();return(0,r.jsx)(n.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(n.xuv,{children:[(0,r.jsxs)(n.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(n.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(n.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,r.jsxs)(n.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:i,padded:a=!0,mainProps:c}=e,p=(0,l.hz)(),x=(0,o.useRouter)(),m="/privacy-requests"===x.pathname||"/datastore-connection"===x.pathname,f=!(p.flags.privacyRequestsConfiguration&&m),{data:h}=(0,d.JE)(void 0,{skip:f}),{data:v}=(0,d.PW)(void 0,{skip:f}),g=p.flags.privacyRequestsConfiguration&&(!h||!v)&&m;return(0,r.jsxs)(n.kCb,{"data-testid":i,direction:"column",h:"100vh",children:[(0,r.jsxs)(s(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",i]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(n.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[g?(0,r.jsx)(u,{}):null,t]})]})}},58754:function(e,t,i){"use strict";var r=i(24246),n=i(91922),a=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:s=!0,children:o,rightContent:l,style:d,...c}=e;return(0,r.jsxs)("div",{...c,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,r.jsxs)(n.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(n.lQT,{className:i||o?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!i&&(0,r.jsx)(a.m,{className:o?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),o]})}},19904:function(e,t,i){"use strict";i.d(t,{Tg:function(){return s}});var r=i(24246),n=i(16134),a=i(31793);let s=e=>(0,n.C)(a.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:i}=e;return s(t)?(0,r.jsx)(r.Fragment,{children:i}):null}},97181:function(e,t,i){"use strict";i.d(t,{d:function(){return d}});var r=i(24246),n=i(91922),a=i(34090),s=i(27378),o=i(46238),l=i(40324);let d=e=>{let{name:t,label:i,labelProps:d,tooltip:c,isRequired:u,layout:p="inline",helperText:x,...m}=e,[f,h,{setValue:v}]=(0,a.U$)(t),g=!!(h.touched&&h.error),[j,y]=(0,s.useState)("");f.value||"tags"!==m.mode&&"multiple"!==m.mode||(f.value=[]),"tags"===m.mode&&"string"==typeof f.value&&(f.value=[f.value]);let b="tags"===m.mode?(e,t)=>e?e.value!==j||f.value.includes(j)?m.optionRender?m.optionRender(e,t):e.label:'Create "'.concat(j,'"'):void 0:m.optionRender||void 0,k=e=>{y(e),m.onSearch&&m.onSearch(e)},C=(e,t)=>{v(e),m.onChange&&m.onChange(e,t)};return"inline"===p?(0,r.jsx)(n.NIc,{isInvalid:g,isRequired:u,children:(0,r.jsxs)(n.rjZ,{templateColumns:i?"1fr 3fr":"1fr",children:[i?(0,r.jsx)(l.__,{htmlFor:m.id||t,...d,children:i}):null,(0,r.jsxs)(n.jqI,{align:"center",children:[(0,r.jsxs)(n.jqI,{vertical:!0,flex:1,className:"mr-2",children:[(0,r.jsx)(n.WPr,{...f,id:m.id||t,"data-testid":"controlled-select-".concat(f.name),...m,optionRender:b,onSearch:"tags"===m.mode?k:void 0,onChange:C,value:f.value||void 0,status:g?"error":void 0}),x&&(0,r.jsx)(n.Q6r,{children:x}),(0,r.jsx)(l.Bc,{isInvalid:g,message:h.error,fieldName:f.name})]}),(0,r.jsx)(o.b,{label:c})]})]})}):(0,r.jsx)(n.NIc,{isInvalid:g,isRequired:u,children:(0,r.jsxs)(n.gCW,{alignItems:"start",children:[(0,r.jsxs)(n.jqI,{align:"center",children:[i?(0,r.jsx)(l.__,{htmlFor:m.id||t,fontSize:"xs",my:0,mr:1,...d,children:i}):null,(0,r.jsx)(o.b,{label:c})]}),(0,r.jsx)(n.WPr,{...f,id:m.id||t,"data-testid":"controlled-select-".concat(f.name),...m,optionRender:b,onSearch:"tags"===m.mode?k:void 0,onChange:C,value:f.value||void 0,status:g?"error":void 0}),x&&(0,r.jsx)(n.Q6r,{style:{marginTop:0},children:x}),(0,r.jsx)(l.Bc,{isInvalid:g,message:h.error,fieldName:f.name})]})})}},812:function(e,t,i){"use strict";i.d(t,{D4:function(){return a.D4},MM:function(){return p},Ot:function(){return d},c6:function(){return n},cj:function(){return m},e$:function(){return o},fn:function(){return l},iC:function(){return x},nU:function(){return u},tB:function(){return c}});var r,n,a=i(19043);let s="An unexpected error occurred. Please try again.",o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if((0,a.Bw)(e)){if((0,a.hE)(e.data))return e.data.detail;if((0,a.cz)(e.data)){var i;let t=null===(i=e.data.detail)||void 0===i?void 0:i[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,a.Dy)(e.data)||404===e.status&&(0,a.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function l(e){return"object"==typeof e&&null!=e&&"status"in e}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:s};if((0,a.oK)(e))return{status:e.originalStatus,message:e.data};if((0,a.Bw)(e)){let{status:i}=e;return{status:i,message:o(e,t.message)}}return t},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=n||(n={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let x={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},m=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},8133:function(e,t,i){"use strict";var r=i(24246),n=i(91922);t.Z=e=>{let{title:t,children:i,isOpen:a,onClose:s,...o}=e;return(0,r.jsxs)(n.u_l,{isOpen:a,onClose:s,isCentered:!0,scrollBehavior:"inside",size:"xl",id:"add-modal",...o,children:[(0,r.jsx)(n.ZAr,{}),(0,r.jsxs)(n.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,r.jsx)(n.xBx,{p:0,children:(0,r.jsx)(n.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)(n.X6q,{as:"h3",size:"sm",children:t})})}),(0,r.jsx)(n.fef,{pb:4,overflow:"auto",children:i})]})]})}},70788:function(e,t,i){"use strict";i.d(t,{m:function(){return d}});var r=i(24246),n=i(91922),a=i(79894),s=i.n(a),o=i(27378);let{Text:l}=n.AntTypography,d=e=>{let{items:t,...i}=e,a=(0,o.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let a=i===t.length-1,o={...e},d=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:a?void 0:400},ellipsis:!a,children:o.title})),d)?o.title=(0,r.jsx)(n.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,r.jsx)(s(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,r.jsx)(n.zrq,{items:a,...i})}},46628:function(e,t,i){"use strict";i.d(t,{MA:function(){return o},Vo:function(){return d},t5:function(){return l}});var r=i(24246),n=i(91922);let a=e=>{let{children:t,title:i="Success"}=e;return(0,r.jsxs)(n.xvT,{"data-testid":"toast-success-msg",children:[(0,r.jsxs)("strong",{children:[i,":"]})," ",t]})},s=e=>{let{children:t}=e;return(0,r.jsxs)(n.xvT,{"data-testid":"toast-error-msg",children:[(0,r.jsx)("strong",{children:"Error:"})," ",t]})},o={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},l=(e,t)=>{let i=(0,r.jsx)(a,{title:t,children:e});return{...o,description:i}},d=e=>{let t=(0,r.jsx)(s,{children:e});return{...o,description:t,status:"error"}}},5417:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var r=i(24246),n=i(19904),a=i(91922),s=i(25980),o=i(77213),l=i(58754),d=i(8133),c=i(34090),u=i(27378),p=i(55484),x=i(40324),m=i(812),f=i(46628),h=i(76174),v=i(97181);let g={identifier:"",name:"",client_id:"",client_secret:""},j=e=>({...e}),y=p.Ry().shape({provider:p.Z_().required().label("Provider"),name:p.Z_().required().label("Name"),client_id:p.Z_().required().label("Client ID"),client_secret:p.Z_().required().label("Client Secret")});var b=e=>{let{openIDProvider:t,onSuccess:i,onClose:n}=e,[s]=(0,h.Qc)(),[o]=(0,h.oP)(),l=(0,u.useMemo)(()=>t?j(t):g,[t]),d=(0,a.pmc)(),p=async(e,t)=>{(e=>{if((0,m.D4)(e)){let t=(0,m.e$)(e.error,"An unexpected error occurred while editing the SSO provider. Please try again.");d((0,f.Vo)(t))}else d((0,f.t5)("SSO provider configuration saved.")),n(),t.resetForm({}),i&&i(e.data)})(l.id?await o(e):await s(e))},b=[{label:"Azure",value:"azure"},{label:"Google",value:"google"},{label:"Okta",value:"okta"},{label:"Custom",value:"custom"}],k=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0})]}),C=()=>(0,r.jsx)(x.j0,{id:"domain",name:"domain",label:"Domain",tooltip:"Domain for your Okta provider",variant:"stacked",isRequired:!0}),_=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.j0,{id:"authorization_url",name:"authorization_url",label:"Authorization URL",tooltip:"Authorization URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"token_url",name:"token_url",label:"Token URL",tooltip:"Token URL for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"userinfo_url",name:"user_info_url",label:"User Info URL",tooltip:"User Info URL for your provider",variant:"stacked",isRequired:!0})]});return(0,r.jsx)(c.J9,{initialValues:l,enableReinitialize:!0,onSubmit:p,validationSchema:y,children:e=>{let{dirty:t,isValid:i,values:s}=e;return(0,r.jsx)(c.l0,{"data-testid":"openIDProvider-form",children:(0,r.jsxs)(a.Kqy,{spacing:4,children:[(0,r.jsx)(v.d,{name:"provider",label:"Provider",options:b,layout:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"identifier",name:"identifier",label:"Identifier",tooltip:"Unique identifier for your provider",variant:"stacked",isRequired:!0,disabled:!!l.id}),(0,r.jsx)(x.j0,{id:"name",name:"name",label:"Name",tooltip:"Display name for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"client_id",name:"client_id",label:"Client ID",type:"password",tooltip:"Client ID for your provider",variant:"stacked",isRequired:!0}),(0,r.jsx)(x.j0,{id:"client_secret",name:"client_secret",label:"Client secret",type:"password",tooltip:"Client secret for your provider",variant:"stacked",isRequired:!0}),"azure"===s.provider&&k(),"okta"===s.provider&&C(),"custom"===s.provider&&_(),(0,r.jsxs)(a.xuv,{textAlign:"right",children:[(0,r.jsx)(a.wpx,{htmlType:"button","data-testid":"cancel-btn",className:"mr-3",onClick:n,children:"Cancel"}),(0,r.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:!t||!i,"data-testid":"save-btn",children:"Save"})]})]})})}})},k=e=>{let{isOpen:t,onClose:i}=e;return(0,r.jsx)(d.Z,{isOpen:t,onClose:i,title:"Add SSO Provider",children:(0,r.jsx)(b,{onClose:i})})},C=e=>{let{isOpen:t,onClose:i,openIDProvider:n}=e;return(0,r.jsx)(d.Z,{isOpen:t,onClose:i,title:"Edit SSO Provider",children:(0,r.jsx)(b,{openIDProvider:n,onClose:i})})},_=e=>{let{openIDProvider:t}=e,{onOpen:i,isOpen:n,onClose:s}=(0,a.qY0)(),{onOpen:o,isOpen:l,onClose:d}=(0,a.qY0)(),c=(0,a.pmc)(),[u]=(0,h.rB)(),p=async()=>{let e=await u(t.identifier);if((0,m.D4)(e)){c((0,f.Vo)((0,m.e$)(e.error))),d();return}c((0,f.t5)("SSO provider deleted successfully")),d()};return(0,r.jsxs)(a.xuv,{alignItems:"center",borderRadius:"lg",borderWidth:"1px",display:"flex",height:"74px",marginBottom:"24px",padding:2,children:[(0,r.jsxs)(a.xuv,{display:"flex",alignItems:"center",children:[(0,r.jsx)(a.Eep,{src:"/images/oauth-login/".concat(t.provider,".svg"),alt:"".concat(t.provider," icon"),width:"40px",height:"40px"}),(0,r.jsxs)(a.xuv,{display:"flex",flexDirection:"column",children:[(0,r.jsx)(a.xvT,{fontSize:"medium",fontWeight:"bold",marginLeft:"16px",children:t.name}),(0,r.jsx)(a.xvT,{fontSize:"medium",marginLeft:"16px",children:t.identifier})]})]}),(0,r.jsxs)(a.xuv,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:[(0,r.jsx)(a.wpx,{className:"mr-3",onClick:o,"data-testid":"remove-sso-provider-btn",children:"Remove"}),(0,r.jsx)(a.wpx,{className:"mr-3",onClick:i,"data-testid":"edit-sso-provider-btn",children:"Edit"})]}),(0,r.jsx)(C,{isOpen:n,onClose:s,openIDProvider:t}),(0,r.jsx)(a.cVQ,{isOpen:l,onClose:d,onConfirm:p,title:"Remove SSO provider",message:(0,r.jsx)(a.xvT,{children:"You are about to permanently remove this SSO provider. Are you sure you would like to continue?"})})]})},R=()=>{let{onOpen:e,isOpen:t,onClose:i}=(0,a.qY0)(),{data:n}=(0,h.qv)();return(0,r.jsxs)(a.xuv,{maxWidth:"600px",marginTop:"40px",children:[(0,r.jsxs)(a.X6q,{marginBottom:4,fontSize:"lg",display:"flex",justifyContent:"space-between",children:["SSO Providers",n&&n.length<5&&(0,r.jsx)(a.wpx,{onClick:e,"data-testid":"add-sso-provider-btn",children:"Add SSO Provider"})]}),(0,r.jsx)(a.xvT,{marginBottom:"30px",fontSize:"sm",children:"Use this area to add and manage SSO providers for you organization. Select “Add SSO provider” to add a new provider."}),null==n?void 0:n.map(e=>(0,r.jsx)(_,{openIDProvider:e},e.identifier)),(0,r.jsx)(k,{isOpen:t,onClose:i})]})},S=i(83265);let w={description:"",fides_key:S.Av,name:""},z=e=>({...e}),q=e=>({description:e.description,fides_key:e.fides_key,name:e.name}),O=p.Ry().shape({description:p.Z_().required().label("Description"),fides_key:p.Z_().required().label("Organization Fides Key"),name:p.Z_().required().label("Name")}),A=e=>{let{organization:t,onSuccess:i}=e,[n,s]=(0,S.$f)(),o=(0,u.useMemo)(()=>t?z(t):w,[t]),l=(0,a.pmc)(),d=async(e,t)=>{let r=q(e);(n=>{if((0,m.D4)(n)){let e=(0,m.e$)(n.error,"An unexpected error occurred while editing the organization. Please try again.");l((0,f.Vo)(e))}else l((0,f.t5)("Organization configuration saved.")),t.resetForm({values:e}),i&&i(r)})(await n(r))},p=!t||s.isLoading;return(0,r.jsx)(c.J9,{initialValues:o,enableReinitialize:!0,onSubmit:d,validationSchema:O,children:e=>{let{dirty:t,isValid:i}=e;return(0,r.jsx)(c.l0,{"data-testid":"organization-form",children:(0,r.jsxs)(a.Kqy,{spacing:4,children:[(0,r.jsx)(x.j0,{id:"fides_key",name:"fides_key",label:"Fides Key",disabled:!0,tooltip:"A unique key that identifies your organization. Not editable via UI.",variant:"stacked"}),(0,r.jsx)(x.j0,{id:"name",name:"name",label:"Name",disabled:p,tooltip:"User-friendly name for your organization, used in messaging to end-users and other public locations.",variant:"stacked"}),(0,r.jsx)(x.j0,{id:"description",name:"description",label:"Description",disabled:p,tooltip:"Short description of your organization, your services, etc.",variant:"stacked"}),(0,r.jsx)(a.xuv,{textAlign:"right",children:(0,r.jsx)(a.wpx,{htmlType:"submit",type:"primary",disabled:p||!t||!i,loading:p,"data-testid":"save-btn",children:"Save"})})]})})}})};var N=i(16643),I=()=>{let{data:e}=(0,S.GQ)(S.Av),{plus:t,flags:{ssoAuthentication:i}}=(0,s.hz)();return(0,r.jsx)(o.Z,{title:"Organization",children:(0,r.jsxs)(a.xuv,{"data-testid":"organization-management",children:[(0,r.jsx)(l.Z,{heading:"Organization Management"}),(0,r.jsxs)(a.xuv,{maxWidth:"600px",children:[(0,r.jsx)(a.xvT,{pb:6,fontSize:"sm",children:"Please use this section to manage your organization‘s details, including key information that will be recorded in the RoPA (Record of Processing Activities)."}),(0,r.jsx)(a.xuv,{background:"gray.50",padding:2,children:(0,r.jsx)(A,{organization:e})}),i&&t&&(0,r.jsx)(n.ZP,{scopes:[N.Sh.OPENID_PROVIDER_CREATE],children:(0,r.jsx)(R,{})})]})]})})}},19043:function(e,t,i){"use strict";i.d(t,{Bw:function(){return s},D4:function(){return n},Dy:function(){return l},XD:function(){return d},cz:function(){return c},hE:function(){return o},oK:function(){return a}});var r=i(76649);let n=e=>"error"in e,a=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,s=e=>(0,r.Ln)({status:"number",data:{}},e),o=e=>(0,r.Ln)({detail:"string"},e),l=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,i){"use strict";i.d(t,{Ln:function(){return r}});let r=(e,t)=>a(e,t),n=Symbol("SOME"),a=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?n in e?e.some(e=>a(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>a(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,i])=>a(i,t[e]));class s{static narrow(e){return new s(t=>r(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,i=e instanceof s?e.NF:e instanceof Function?e:t=>r(e,t);return new s(e=>t(e)&&i(e))}}new s(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=85082)}),_N_E=e.O()}]);