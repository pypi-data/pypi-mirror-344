{% load i18n %}
{% load texsitecore_tags %}
{% load wagtailimages_tags %}

{% get_live_descendant_pages value.parent value.limit value.newest_first as pages %}
{% get_paginator request.GET.page pages 8 as paginator %}

{% for article in paginator %}
    <div class="post-preview">
        <a href="{{ article.url }}?navigate=true">
            <h2 class="post-title">
                {{ article.title }}
            </h2>
            <h3 class="post-subtitle">
                {% for block in article.specific.body %}
                    {% if block.block_type == "intro" %}
                        {{ block.value.slogan }}
                    {% endif %}
                {% endfor %}
            </h3>
        </a>
        <p class="post-meta">{% include "texsitecleanblog/includes/author.html" with author=article.owner published_at=article.first_published_at only %}</p>
    </div>
    {% if paginator.has_other_pages or not forloop.last %}
        <hr>
    {% endif %}
{% empty %}
    <p>{% trans "No entries found" %}</p>
{% endfor %}

{% if paginator.has_other_pages %}
    {% include "texsitecleanblog/includes/paginator.html" with items=paginator only %}
{% endif %}
