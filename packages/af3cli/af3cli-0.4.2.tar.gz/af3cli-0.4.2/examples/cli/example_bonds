#!/bin/bash

# Example
# Pseudomonas aerugionsa PvdQ covalently acylated with myristic acid
# Details:
# - Protein Data Bank (PDB) Entry: 3SRA
# - Reference: https://www.rcsb.org/structure/3SRA

# Define filename and job name
FILENAME="example_bonds_cli.json"
JOB_NAME="example_bonds_cli_job"

# Protein sequence for PvdQ subunit alpha
PROTEIN_SEQUENCE_A="\
TGLAADIRWTAYGVPHIRAKDERGLGYGIGYAYARDNACLLAEEIVTARGERARYFGSEGKSSAELDNLPSDIFYAWL\
NQPEALQAFWQAQTPAVRQLLEGYAAGFNRFLREADGKTTSCLGQPWLRAIATDDLLRLTRRLLVEGGVGQFADALVA\
AAPPGAE\
"
PROTEIN_ID_A="A"

# Protein sequence for PvdQ subunit beta
PROTEIN_SEQUENCE_B="\
SNAIAVGSERSADGKGMLLANPHFPWNGAMRFYQMHLTIPGRLDVMGASLPGLPVVNIGFSRHLAWTHTVDTSSHFTL\
YRLALDPKDPRRYLVDGRSLPLEEKSVAIEVRGADGKLSRVEHKVYQSIYGPLVVWPGKLDWNRSEAYALRDANLENT\
RVLQQWYSINQASDVADLRRRVEALQGIPWVNTLAADEQGNALYMNQSVVPYLKPELIPACAIPQLVAEGLPALQGQD\
SRCAWSRDPAAAQAGITPAAQLPVLLRRDFVQNSNDSAWLTNPASPLQGFSPLVSQEKPIGPRARYALSRLQGKQPLE\
AKTLEEMVTANHVFSADQVLPDLLRLCRDNQGEKSLARACAALAQWDRGANLDSGSGFVYFQRFMQRFAELDGAWKEP\
FDAQRPLDTPQGIALDRPQVATQVRQALADAAAEVEKSGIPDGARWGDLQVSTRGQERIAIPGGDGHFGVYNAIQSVR\
KGDHLEVVGGTSYIQLVTFPEEGPKARGLLAFSQSSDPRSPHYRDQTELFSRQQWQTLPFSDRQIDADPQLQRLSIRE\
"
PROTEIN_ID_B="B"

# Myristic acid, CCD format
LIGAND_CCD="MYR"
LIGAND_ID="C"

# Bond expression
BOND_EXPRESSION="B:1:OG-C:1:C1"


# Run the CLI command
af3cli config --filename "${FILENAME}" --jobname "${JOB_NAME}" \
  - protein add --sequence "${PROTEIN_SEQUENCE_A}" -i ${PROTEIN_ID_A} \
  - protein add --sequence "${PROTEIN_SEQUENCE_B}" -i ${PROTEIN_ID_B} \
  - ligand add --ccd ${LIGAND_CCD} -i ${LIGAND_ID} \
  - bond --add ${BOND_EXPRESSION} \
  - debug --show  # Exclude this line to enable .json file creation
