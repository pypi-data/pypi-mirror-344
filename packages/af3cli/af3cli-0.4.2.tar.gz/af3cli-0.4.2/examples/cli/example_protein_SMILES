#!/bin/bash

# Example
# Human Kv7.2 (KCNQ2) with retigabine
# Details:
# - Protein Data Bank (PDB) Entry: 7CR2
# - Reference: https://www.rcsb.org/structure/7CR2

# Define constants
FILENAME="example_SMILES_cli.json"
JOB_NAME="example_SMILES_cli_job"

# Protein sequence fetched from FASTA file
PROTEIN_SEQUENCE="\
MAGKPPKRNAFYRKLQNFLYNVLERPRGWAFIYHAYVFLLVFSCLVLSVFSTIKEYEKSSEGALYILEIVTIVVFGVE\
YFVRIWAAGCCCRYRGWRGRLKFARKPFCVIDIMVLIASIAVLAAGSQGNVFATSALRSLRFLQILRMIRMDRRGGTW\
KLLGSVVYAHSKELVTAWYIGFLCLILASFLVYLAEKGENDHFDTYADALWWGLITLTTIGYGDKYPQTWNGRLLAAT\
FTLIGVSFFALPAGILGSGFALKVQEQHRQKHFEKRRNPAAGLIQSAWRFYATNLSRTDLHSTWQYYERTVTVPMYSS\
QTQTYGASRLIPPLNQLELLRNLKSKSGLAFRKDPPPEPSPSKGSPCRGPLCGCCPGRSSQKVSLKDRVFSSPRGVAA\
KGKGSPQAQTVRRSPSADQSLEDSPSKVPKSWSFGDRSRARQAFRIKGAASRQNSEEASLPGEDIVDDKSCPCEFVTE\
DLTPGLKVSIRAVCVMRFLVSKRKFKESLRPYDVMDVIEQYSAGHLDMLSRIKSLQSRVDQIVGRGPAITDKDRTKGP\
AEAELPEDPSMMGRLGKVEKQVLSMEKKLDFLVNIYMQRMGIPPTETEAYFGAKEPEPAPPYHSPEDSREHVDRHGCI\
VKIVRSSSSTGQKNFSVEGGSSGGWSHPQFEK\
"
# Homotetrameric channel protein
NUMBER_OF_CHAINS=4

# Retigabine SMILES representation
RTG_SMILES="CCOC(=O)NC1=C(C=C(C=C1)NCC2=CC=C(C=C2)F)N"
NUMBER_OF_LIGANDS=4

# Run the CLI command
af3cli config --filename "${FILENAME}" --jobname "${JOB_NAME}" \
  - protein add --sequence "${PROTEIN_SEQUENCE}" --num ${NUMBER_OF_CHAINS} \
  - ligand add --smiles "${RTG_SMILES}" --num ${NUMBER_OF_LIGANDS} \
  - debug --show  # Exclude this line to enable .json file creation
