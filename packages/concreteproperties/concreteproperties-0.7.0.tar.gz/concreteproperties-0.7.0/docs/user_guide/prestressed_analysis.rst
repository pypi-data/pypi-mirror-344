.. _label-prestressed-analysis:

Prestressed Analysis
====================

This section of the documentation outlines how to perform analyses of prestressed
concrete sections in ``concreteproperties``.

An prestressed analysis in ``concreteproperties`` begins by creating a
:class:`~concreteproperties.prestressed_section.PrestressedSection` object from a
:class:`~sectionproperties.pre.geometry.CompoundGeometry` object with assigned
material properties.

..  autoclass:: concreteproperties.prestressed_section.PrestressedSection
  :noindex:
  :members: __init__

.. note::

    The internal axial force and bending moment generated by the prestressing strands
    is automatically included in all analyses.

.. seealso::
  See :ref:`/examples/prestressed_section.ipynb` for an example on how to conduct a
  prestressed analysis with ``concreteproperties``.

Visualising the Cross-Section
-----------------------------

The :class:`~concreteproperties.prestressed_section.PrestressedSection` object can be
visualised by calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.plot_section` method.

..  automethod:: concreteproperties.prestressed_section.PrestressedSection.plot_section
  :noindex:


Gross Area Properties
---------------------

Upon creating a :class:`~concreteproperties.prestressed_section.PrestressedSection`
object, ``concreteproperties`` will automatically calculate the area properties based on
the gross prestressed concrete cross-section.


Cracked Area Properties
-----------------------

The area properties of the cracked cross-section can be determined by calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_cracked_properties`
method.

Unlike regular reinforced concrete sections, the cracked section properties of
prestressed sections are sensitive to external loads, e.g. moment due to self-weight.
These can be provided to the analysis by providing the arguments ``m_ext`` and
``n_ext``.

.. note::

    The combination of ``m_ext`` and ``n_ext``, combined with the prestressing actions,
    must result in tension within the concrete. If the provided loads results in
    compression across the entire cross-section, a cracked analysis cannot be carried
    out and a ``ValueError`` will be raised. An easy way to test this is to set the
    flexural tensile strength of the concrete to zero and review the positive and
    negative cracking moments.

..  automethod:: concreteproperties.prestressed_section.PrestressedSection.calculate_cracked_properties
  :noindex:

The cracking moment is determined assuming cracking occurs once the stress in the
concrete reaches the ``flexural_tensile_strength``. Cracked properties are calculated
assuming the concrete is linear elastic and can only resist compression.


Moment Curvature Analysis
-------------------------

A moment curvature analysis can be performed on the prestressed concrete cross-section
by calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.moment_curvature_analysis`
method.

..  automethod:: concreteproperties.prestressed_section.PrestressedSection.moment_curvature_analysis
  :noindex:

This analysis uses the ``stress_strain_profile`` given to the
:class:`~concreteproperties.material.Concrete` and
:class:`~concreteproperties.material.Steel` material properties to calculate a moment
curvature response. The analysis is displacement controlled with an adaptive curvature
increment controlled by the parameters ``kappa_inc``, ``kappa_mult``, ``kappa_inc_max``,
``delta_m_min`` and ``delta_m_max``.


Ultimate Bending Capacity
-------------------------

The ultimate bending capacity of the prestressed concrete cross-section can be
calculated by calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.ultimate_bending_capacity`
method.

..  automethod:: concreteproperties.prestressed_section.PrestressedSection.ultimate_bending_capacity
  :noindex:

This analysis uses the ``ultimate_stress_strain_profile`` given to the
:class:`~concreteproperties.material.Concrete` materials and the
``stress_strain_profile`` given to the :class:`~concreteproperties.material.Steel`
materials. The ultimate strain profile within the cross-section is determined by setting
the strain at the extreme compressive fibre to the ``ultimate_strain`` parameter (see
:ref:`label-conc-ult-profile`) and finding the neutral axis that satisfies the
equilibrium of axial forces.


Moment Interaction Diagram
--------------------------

.. attention::

    Moment interaction diagrams for prestressed concrete sections are not yet
    implemented.


Biaxial Bending Diagram
-----------------------

.. attention::

    Biaxial bending diagrams for prestressed concrete sections are not yet implemented.


Stress Analysis
---------------

``concreteproperties`` allows you to perform four different kinds of stress analysis.
Each is detailed separately below.


Uncracked Stress
^^^^^^^^^^^^^^^^

A stress analysis can be performed on the gross prestressed concrete cross-section by
calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_uncracked_stress`
method.

..  automethod:: concreteproperties.prestressed_section.PrestressedSection.calculate_uncracked_stress
  :noindex:


Cracked Stress
^^^^^^^^^^^^^^

A stress analysis can be performed on the cracked prestressed concrete cross-section by
calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_cracked_stress`
method. Prior to calling this method, the cracked properties must be calculated using
the :meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_cracked_properties`
method and these results passed to
:meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_cracked_stress`.

.. note::

    Unlike ``ConcreteSection.calculate_cracked_stress()``, the external forces for the
    cracked stress analysis are supplied to the
    ``PrestressedSection.calculate_cracked_properties()`` method prior to calling
    ``PrestressedSection.calculate_cracked_stress()``.

..  automethod:: concreteproperties.prestressed_section.PrestressedSection.calculate_cracked_stress
  :noindex:


Service Stress
^^^^^^^^^^^^^^

A service stress analysis can be performed on the prestressed concrete cross-section by
calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_service_stress`
method. Prior to calling this method, a moment curvature analysis must be performed by
calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.moment_curvature_analysis`
method and these results passed to
:meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_service_stress`.


..  automethod:: concreteproperties.prestressed_section.PrestressedSection.calculate_service_stress
  :noindex:


Ultimate Stress
^^^^^^^^^^^^^^^

An ultimate stress analysis can be performed on the prestressed concrete cross-section by
calling the
:meth:`~concreteproperties.cprestressed_section.PrestressedSection.calculate_ultimate_stress`
method. Prior to calling this method, the ultimate bending capacity must be calculated
by calling the
:meth:`~concreteproperties.prestressed_section.PrestressedSection.ultimate_bending_capacity`
method and these results passed to
:meth:`~concreteproperties.prestressed_section.PrestressedSection.calculate_ultimate_stress`.


..  automethod:: concreteproperties.prestressed_section.PrestressedSection.calculate_ultimate_stress
  :noindex:
